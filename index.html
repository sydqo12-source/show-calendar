<!DOCTYPE html>
<html lang="ko" role="application">
<head>
    <meta name="mobile-web-app-capable" content="yes">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-KJCTM7H6PT"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-KJCTM7H6PT');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" id="viewport-meta">
    <title>ì‡¼ì½•! - 2026 í‹°ì¼“íŒ… ìº˜ë¦°ë”, ê³µì—° ì˜ˆë§¤ì¼ì •</title>

    <meta name="description" content="í‹°ì¼“íŒ… ì¼ì • ì²´í¬ë¥¼ í¸í•˜ê²Œ! 2026ë…„ ë®¤ì§€ì»¬, ì½˜ì„œíŠ¸, ì—°ê·¹ì˜ í‹°ì¼“íŒ… ì¼ì •ë¶€í„° ë†€í‹°ì¼“(ì¸í„°íŒŒí¬), ì˜ˆìŠ¤24 ë“± ì˜ˆë§¤ì²˜ í™•ì¸ê¹Œì§€ í•œë²ˆì—! í‹°ì¼“íŒ… ìº˜ë¦°ë” ì‡¼ì½•(Showkok)!">
    <meta name="keywords" content="ê³µì—°, ì˜ˆë§¤, ì¼ì •, ê³µì—°ì¼ì •, ì˜ˆë§¤ì¼ì •, ì–´ë¦°ì´, ì–´ë¦°ì´ê³µì—°, ì–´ë¦°ì´ ê³µì—°, ì–´ë¦°ì´ ë®¤ì§€ì»¬, ì–´ë¦°ì´ë®¤ì§€ì»¬, ê°€ì¡±ë®¤ì§€ì»¬, ê°€ì¡± ë®¤ì§€ì»¬, ì½˜ì„œíŠ¸, ë®¤ì§€ì»¬, ì—°ê·¹, ì½˜ì„œíŠ¸ ì¼ì •, ë®¤ì§€ì»¬ ì¼ì •, ì—°ê·¹ ì¼ì •, ë†€í‹°ì¼“, ì¸í„°íŒŒí¬, ì¸í„°íŒŒí¬í‹°ì¼“, nolí‹°ì¼“, nol, ì˜ˆìŠ¤24í‹°ì¼“, ì˜ˆìŠ¤24, ì˜ˆìŠ¤24 í‹°ì¼“, í‹°ì¼“ì˜¤í”ˆ, ë©œë¡ í‹°ì¼“, í‹°ì¼“ë§í¬, í‹°ì¼“íŒ…, í‹°ì¼“íŒ… ì¼ì •, ì·¨ì¼“íŒ…, ì½˜ì„œíŠ¸ í‹°ì¼“íŒ…, ë®¤ì§€ì»¬ í‹°ì¼“íŒ…, ì—°ê·¹ í‹°ì¼“íŒ…, ìµœí˜„ìš°, ë§ˆìˆ , ë§ˆìˆ  ì¼ì •, ë§ˆìˆ  ê³µì—°, ë§ˆìˆ  ì˜ˆë§¤, ì˜ˆë§¤ë‹¬ë ¥, í‹°ì¼“íŒ…ë‹¬ë ¥, ë‹¬ë ¥, ì½˜ì„œíŠ¸ ì˜ˆë§¤, ì½˜ì„œíŠ¸ì˜ˆë§¤, ë®¤ì§€ì»¬ ì˜ˆë§¤, ë®¤ì§€ì»¬ì˜ˆë§¤, íŒ¬ë¯¸íŒ…, íŒ¬ë¯¸íŒ… ì˜ˆë§¤, íŒ¬ë¯¸íŒ… ì¼ì •, íŒ¬ì˜ˆë§¤, íŒ¬ì¹´í˜, ì„ ì˜ˆë§¤, ì„ ì˜ˆë§¤ ì¼ì •, ì‡¼ì½•, showkok, 2026ê³µì—°ì¼ì •, ê³µì—°ë‹¬ë ¥">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://showkok.com/">
    <meta property="og:title" content="ì‡¼ì½•! - 2026 ê³µì—° í‹°ì¼“íŒ… ìº˜ë¦°ë”">
    <meta property="og:description" content="í‹°ì¼“íŒ… ì–¸ì œì§€? í‹°ì¼“íŒ… ì¼ì • ì²´í¬ì™€ ì˜ˆë§¤ì²˜ í™•ì¸ê¹Œì§€ í•œë²ˆì—!">
    <meta property="og:image" content="https://showkok.com/og-image.jpg">
    <meta name="naver-site-verification" content="ce3acdb3f4cf9c86aa7822b6e7ddb75d6468776a" />
    <meta name="google-site-verification" content="pJOl-0RpSmzuXBOI20_1imrQvVjgeFC04NbXUYCz7ik" />

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ffffff">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ì‡¼ì½•">
    <link rel="apple-touch-icon" href="icon-192.png">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');

        button {
            -webkit-tap-highlight-color: transparent; /* í„°ì¹˜ ì‹œ íŒŒë€ ë°•ìŠ¤ ì œê±° */
            outline: none; /* í¬ì»¤ìŠ¤ í…Œë‘ë¦¬ ì œê±° */
            transition: opacity 0.2s; /* ë¶€ë“œëŸ¬ìš´ íš¨ê³¼ */
            cursor: pointer; /* ë§ˆìš°ìŠ¤ ì†ê°€ë½ ëª¨ì–‘ */
        }

        button:hover {
            opacity: 0.9; /* ë§ˆìš°ìŠ¤ ì˜¬ë ¸ì„ ë•Œ ì‚´ì§ íˆ¬ëª…í•´ì§ */
        }

        /* [ê¸°ë³¸ ì„¤ì •] */
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #ffffff;
            padding: 15px;
            -webkit-user-select: none;
            user-select: none;
            touch-action: pan-y;
            overscroll-behavior: none;
        }

        body.no-scroll {
            overflow: hidden;
            touch-action: none;
        }

        /* [í—¤ë”] */
        .header-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 0;
            margin-bottom: 0;
            position: relative;
        }

        /* .main-title { font-size: 36px; font-weight: 800; color: #343a40; margin-bottom: 25px; word-break: keep-all; text-align: center; } */
        .sub-title {
            font-size: 32px;
            font-weight: 800;
            color: #495057;
        }

        .nav-row {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn {
            width: 30px;
            height: 30px;
            background-color: #fff;
            border: 1px solid #ced4da;
            border-radius: 4px;
            color: #868e96;
            font-size: 16px;
            font-weight: 700;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s;
            -webkit-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            outline: none;
        }

        .nav-btn:hover {
            background-color: #f1f3f5;
            color: #343a40;
            border-color: #adb5bd;
        }

        .nav-btn.disabled {
            opacity: 0.3;
            pointer-events: none;
        }

        .filter-group {
            display: flex;
            align-items: flex-start;
            gap: 0;
            width: 100%;
        }

        .group-title {
            font-weight: 800;
            color: #212529;
            white-space: nowrap;
            font-size: 18px;
            margin-right: 4px;
            margin-top: 1px;
        }

        .chk-list {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 5px 4px;
            flex: 1;
        }

        label {
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-right: 5px;
            -webkit-tap-highlight-color: transparent;
        }

        label:hover {
            opacity: 1;
        }

        input[type="checkbox"] {
            accent-color: #343a40;
            width: 18px;
            height: 18px;
            margin: 0;
            cursor: pointer;
        }

        .btn-reset {
            margin-left: -4px;
            background-color: transparent;
            border: 1px solid #adb5bd;
            border-radius: 4px;
            padding: 2px 8px;
            font-size: 15px;
            font-weight: 600;
            color: #495057;
            cursor: pointer;
            transition: all 0.2s;
            height: 28px;
            display: flex;
            align-items: center;
            -webkit-tap-highlight-color: transparent;
        }

        .btn-reset:hover {
            background-color: #e9ecef;
            color: #212529;
        }

        .btn-reset:active {
            background-color: transparent;
            color: #495057;
            border-color: #ced4da;
        }

        /* [í…ìŠ¤íŠ¸ ìƒ‰ìƒ] */
        .txt-red { color: #e03131; font-weight: 700; }
        .txt-green { color: #2b8a3e; font-weight: 700; }
        .txt-blue { color: #1971c2; font-weight: 700; }
        .txt-black { color: #495057; font-weight: 500; }

        /* ==========================================================================
           [ì¤‘ìš”] ë¦¬ìŠ¤íŠ¸í˜• ìº˜ë¦°ë” ìŠ¤íƒ€ì¼
           ========================================================================== */

        /* í…Œì´ë¸” ì „ì²´ ìŠ¤íƒ€ì¼ (ì¹´ë“œ í˜•íƒœ) */
        table {
            display: block;
            width: 100%;
            background: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #dee2e6; /* ì „ì²´ ì™¸ê³½ì„  */
            margin-bottom: 0;
            border-collapse: separate;
            border-spacing: 0;
        }

        thead { display: none; }
        tbody, th, tr { display: block; }
        tr { margin-bottom: 0; }

        /* [ìˆ˜ì •] ë‚ ì§œ ì¹¸(td) ë””ìì¸ - í† ìš”ì¼ ë°‘ì¤„ ì‚´ë¦¬ê¸° */
        td {
            display: block;
            height: auto !important;
            border: none;
            border-bottom: 1px solid #e9ecef !important; /* ëª¨ë“  ì¹¸ì— ë°‘ì¤„ ì ìš© */
            position: relative;
            text-align: left !important;
            padding: 10px 15px !important;
        }

        /* td:last-child { border-bottom: none !important; }  <-- ì´ ì¤„ì„ ì‚­ì œí–ˆìŠµë‹ˆë‹¤ (í† ìš”ì¼ ë°‘ì¤„ ë³µêµ¬) */
        td:empty { display: none; }

        /* ë‚ ì§œ ìˆ«ì ìŠ¤íƒ€ì¼ */
        .date-num {
            display: inline-block;
            width: auto;
            font-size: 16px;
            margin-bottom: 0;
            border-bottom: none;
            font-weight: 500;
            color: #ced4da;
        }

        .date-num::after {
            content: "(" attr(data-dayname) ")";
            font-size: inherit;
            color: inherit;
            font-weight: inherit;
            margin-left: 0;
        }

        .sun .date-num { color: #ffc9c9; }
        .sat .date-num { color: #a5d8ff; }

        /* [ìƒíƒœë³„ ìŠ¤íƒ€ì¼] */
        /* [ìˆ˜ì •] ì§€ë‚œ ë‚ ì§œ(ê³¼ê±°) ìŠ¤íƒ€ì¼: ê²½ê³„ì„ ì€ ê±´ë“œë¦¬ì§€ ì•ŠìŒ */
        td.day-past {
            /* td ìì²´ì—ëŠ” íˆ¬ëª…ë„ë¥¼ ì£¼ì§€ ì•ŠìŒ -> ê²½ê³„ì„ (border) ì„ ëª…í•˜ê²Œ ìœ ì§€ë¨ */
            opacity: 1 !important;
            background-color: transparent !important;
        }

        /* 2. [ìˆ˜ì •ë¨] ë‚ ì§œ ìˆ«ì: 'ê³¼ê±°'ì´ë©´ì„œ ë™ì‹œì— 'í™œì„±í™”ëœ(ê³µì—°ìˆëŠ”)' ë‚ ì§œì—ë§Œ íˆ¬ëª…ë„ ì ìš© */
        /* ê³µì—°ì´ ì—†ëŠ” ë‚ (day-inactive)ì€ ì´ ê·œì¹™ì´ ì ìš©ë˜ì§€ ì•Šì•„ ì›ë˜ ìƒ‰ìƒ ê·¸ëŒ€ë¡œ ë‚˜ì˜µë‹ˆë‹¤ */
        td.day-past.day-active .date-num {
            opacity: 0.5 !important;
        }

        /* ì¼ìš”ì¼/í† ìš”ì¼ ìƒ‰ìƒë„ 'ê³µì—° ì—†ëŠ” ë‚ ' ê¸°ì¤€(íŒŒìŠ¤í…”í†¤)ìœ¼ë¡œ ë³µêµ¬ */
        /* td.day-past.sun .date-num { color: #ffc9c9 !important; } */
        /* td.day-past.sat .date-num { color: #a5d8ff !important; } */

        /* 2. ì§€ë‚œ ë‚ ì§œì˜ 'ê³µì—° ë°•ìŠ¤'ë§Œ ë”°ë¡œ íë¦¬ê²Œ ì²˜ë¦¬ */
        td.day-past .event-box {
            opacity: 0.5 !important; /* ë°•ìŠ¤ë§Œ 40% íˆ¬ëª…í•˜ê²Œ */
        }

        /* 3. í´ë¦­í•˜ê±°ë‚˜ ë§ˆìš°ìŠ¤ ì˜¬ë ¤ë„ íë¦¼ íš¨ê³¼ê°€ ìœ ì§€ë˜ë„ë¡ ì„¤ì • */
        td.day-past .event-box:hover,
        td.day-past .event-box:active {
            opacity: 0.5 !important; /* ë§ˆìš°ìŠ¤ ì˜¬ë ¤ë„ íˆ¬ëª…ë„ ìœ ì§€ */
        }

        /* 1. ê³µì—° ìˆëŠ” ë‚  (Active) */
        td.day-active {
            padding: 7px 7px 0px 7px !important;
        }

        td.day-active .date-num {
            font-size: 24px;
            margin-bottom: 2px;
            padding-bottom: 2px;
            color: #212529;
            font-weight: 800;
        }

        td.day-active.sun .date-num { color: #e03131 !important; }
        td.day-active.sat .date-num { color: #1971c2 !important; }

        /* 2. ê³µì—° ì—†ëŠ” ë‚  (Inactive) */
        td.day-inactive {
            padding: 7px 7px !important;
        }

        td.day-inactive .date-num { font-size: 16px; color: #ced4da; }
        td.day-inactive.sun .date-num { color: #ffc9c9; }
        td.day-inactive.sat .date-num { color: #a5d8ff; }

        /* [ê³µì—° ë°•ìŠ¤ ë””ìì¸] */
        .event-box {
            display: none;
            font-size: 16px !important;
            padding: 7px;
            margin-bottom: 7px;
            border-radius: 10px;
            background-color: #fff;
            border: 1px solid #ced4da;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            overflow: hidden;
            transition: transform 0.2s, box-shadow 0.2s;
            -webkit-tap-highlight-color: transparent;
        }

        .event-box:last-child {
            margin-bottom: 7;
        }

        .event-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.1);
            border-color: #adb5bd;
        }

        /* í¬ìŠ¤í„° ì´ë¯¸ì§€ ë¹„ìœ¨ ì›ë³¸ ìœ ì§€ */
        .event-poster-thumb {
            width: 100%;
            height: auto;
            border-radius: 6px;
            margin-bottom: 12px;
            display: block;
            background-color: #f1f3f5;
            -webkit-touch-callout: none;
            -webkit-user-drag: none;
            -webkit-user-select: none; /* [ì¶”ê°€] ì•„ì´í°ìš© */
            user-select: none;
            pointer-events: auto;
        }

        .event-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
            font-size: 18px;
        }

        .box-line2 {
            display: block;
            line-height: 1.4;
            margin-top: 8px;
            white-space: normal;
            word-break: keep-all;
        }

        /* ì´ˆê¸° ë¡œë”© ì‹œ ìŠ¤íƒ€ì¼ */
        body.initial-mode td { border-bottom: 1px solid #e9ecef !important; }
        body.initial-mode .date-num { font-size: 16px; font-weight: 500; color: #ced4da; }
        body.initial-mode .sun .date-num { color: #ffc9c9; }
        body.initial-mode .sat .date-num { color: #a5d8ff; }

        /* [íŒì—…(ëª¨ë‹¬) ìŠ¤íƒ€ì¼] */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.3);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            padding-top: 0;
            padding-bottom: 0;
            -webkit-backdrop-filter: blur(0px); /* [ì¶”ê°€] ì•„ì´í°ìš© */
            backdrop-filter: blur(0px);
            overflow-y: auto;
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 350px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            animation: popUp 0.2s ease-out;
            margin-bottom: 0;
            border: 1px solid #ced4da;
        }

        @keyframes popUp {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal-poster-area {
            width: 100%;
            height: 400px;
            background-color: #f8f9fa;
            display: none !important;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border-bottom: 1px solid #eee;
        }

        .modal-poster-area img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            cursor: zoom-in;
            -webkit-touch-callout: none;
        }

        .no-poster-text { color: #adb5bd; font-weight: 600; font-size: 14px; }

        .modal-body { padding: 15px; text-align: center; }
        .modal-title { font-size: 20px; font-weight: 800; margin-bottom: 5px; color: #212529; word-break: keep-all; }
        .modal-info { font-size: 17px; color: #868e96; margin-bottom: 15px; }

        /* [ì¶”ê°€] íŒì—…ì°½ ì˜ˆë§¤ì¼ì • í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .modal-ticketing {
            font-size: 18px; /* ì¥ì†Œ ì •ë³´ì™€ ë¹„ìŠ·í•œ í¬ê¸° */
            color: #fa5252; /* ê°•ì¡°ìƒ‰ (ë¹¨ê°„ìƒ‰ ê³„ì—´) */
            font-weight: 700; /* êµµê²Œ */
            margin-top: -5px; /* ì¥ì†Œ ì •ë³´ì™€ ì¢€ ë” ê°€ê¹ê²Œ ë¶™ì´ê¸° */
            margin-bottom: 10px; /* ë²„íŠ¼ë“¤ê³¼ëŠ” ê°„ê²© ë„ìš°ê¸° */
            word-break: keep-all; /* ì¤„ë°”ê¿ˆ ê¹”ë”í•˜ê²Œ */
        }

        .modal-btn-container { display: flex; flex-direction: column; gap: 8px; width: 100%; }
        .btn-row { display: flex; width: 100%; gap: 8px; }

        .modal-btn {
            padding: 0;
            height: 45px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            text-align: center;
            cursor: pointer;
            text-decoration: none;
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.2s;
            -webkit-tap-highlight-color: transparent !important;
            -webkit-touch-callout: none !important;
            -webkit-user-select: none !important;
            user-select: none !important;
        }

        .modal-btn:hover { opacity: 0.9; }
        .btn-link-black { background-color: #343a40; color: white; flex: 1; }
        .btn-action-red { background-color: #fa5252; color: white; flex: 1; }

        .btn-youtube-custom {
            background-color: white;
            color: black;
            border: 1px solid #ced4da;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-youtube-custom:hover { background-color: #f8f9fa; }
        .yt-icon { width: 28px; height: auto; display: block; }

        /* [í™•ì¸ì°½ ë° ì´ë¯¸ì§€ í™•ëŒ€] */
        .confirm-content {
            background: white;
            width: 85%;
            max-width: 320px;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            animation: popUp 0.2s ease-out;
            margin: 0;
        }

        .confirm-text { font-size: 18px; font-weight: 700; color: #343a40; margin-bottom: 15px; line-height: 1.6; word-break: keep-all; }
        .confirm-btn-group { display: flex; gap: 10px; justify-content: center; }
        .confirm-btn { flex: 1; padding: 12px 0; border-radius: 8px; font-size: 16px; font-weight: 700; cursor: pointer; border: none; }
        .btn-yes { background-color: #343a40; color: white; }
        .btn-no { background-color: #f1f3f5; color: #495057; }

        #imageZoomOverlay {
            display: none;
            position: fixed;
            z-index: 10001;
            padding-top: 20px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.9);
            touch-action: pan-x pan-y pinch-zoom;
        }

        #zoomedImage {
            margin: auto;
            display: block;
            max-width: 95%;
            max-height: 90vh;
            object-fit: contain;
            animation: zoomAnim 0.3s;
            -webkit-touch-callout: none;
        }

        @keyframes zoomAnim { from {transform:scale(0.8); opacity:0;} to {transform:scale(1); opacity:1;} }
        
        .close-zoom {
            position: absolute;
            top: 20px;
            right: 30px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
            z-index: 10002;
        }
        
        .close-zoom:hover, .close-zoom:focus { color: #bbb; text-decoration: none; cursor: pointer; }
        
        .top-logo {
            position: absolute;
            top: 20px; /* ìœ„ì—ì„œ 15px */
            left: 20px; /* ì™¼ìª½ì—ì„œ 15px */
            font-size: 30px; /* ì‘ê²Œ (ì›í•˜ëŠ” í¬ê¸°ë¡œ ì¡°ì ˆ ê°€ëŠ¥) */
            z-index: 2005; /* ë‹¤ë¥¸ ìš”ì†Œë³´ë‹¤ ìœ„ì— í‘œì‹œ */
        }
        
        /* ë¡œë”© ìŠ¤í”¼ë„ˆ ë””ìì¸ */
        .loading-spinner {
           width: 50px;
           height: 50px;
           border: 5px solid #f3f3f3; /* íšŒìƒ‰ í…Œë‘ë¦¬ (ë°°ê²½) */
           border-top: 5px solid #343a40; /* ì§„í•œ íšŒìƒ‰ (ëŒì•„ê°€ëŠ” ë¶€ë¶„) - ì•± í…Œë§ˆìƒ‰ */
           border-radius: 50%; /* ì›í˜•ìœ¼ë¡œ ë§Œë“¤ê¸° */
           animation: spin 1s linear infinite; /* 1ì´ˆë§ˆë‹¤ ë¬´í•œ íšŒì „ */
           margin-bottom: 20px;
        }

         /* íšŒì „ ì• ë‹ˆë©”ì´ì…˜ ë™ì‘ */
         @keyframes spin {
             0% { transform: rotate(0deg); }
             100% { transform: rotate(360deg); }
         }
    /*  #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #ffffff;
            z-index: 99999; 
            display: flex;
            justify-content: center;
            align-items: center;
        } 

        .splash-icon {
            font-size: 50px;
        } */

        /* 2. ëˆì ì´ëŠ” í—¤ë” (ìŠ¤í¬ë¡¤ í•˜ë‹¤ê°€ ì²œì¥ì— ë‹¿ìœ¼ë©´ ë¶™ìŒ) */
        #sticky-header {
            position: -webkit-sticky; /* ì‚¬íŒŒë¦¬(ì•„ì´í°) í˜¸í™˜ */
            position: sticky; /* í•µì‹¬ ì½”ë“œ */
            top: 0; /* ì²œì¥ì— ë”± ë¶™ìŒ */
            background-color: rgba(255, 255, 255, 0.5); /* ì‚´ì§ íˆ¬ëª…í•˜ê²Œ í•´ì„œ ê³ ê¸‰ìŠ¤ëŸ½ê²Œ */
            -webkit-backdrop-filter: blur(1px);
            backdrop-filter: blur(1px); /* ë’¤ì— ë‚´ìš©ë¬¼ íë¦¬ê²Œ ë¹„ì¹¨ */
            z-index: 1000;
            margin-left: -15px; /* ì™¼ìª½ ì—¬ë°±(15px) ë¬´ì‹œí•˜ê³  ê½‰ ì±„ìš°ê¸° */
            margin-right: -15px; /* ì˜¤ë¥¸ìª½ ì—¬ë°±(15px) ë¬´ì‹œí•˜ê³  ê½‰ ì±„ìš°ê¸° */
            margin-top: -25px;
            padding: 70px 15px 10px 25px;
        }

        /* 3. í—¤ë” ë‚´ë¶€ ì •ë ¬ (ê¸°ì¡´ margin-top ì œê±°) */
        .header-wrapper {
            margin-top: 0;
            margin-bottom: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .control-bar {
            margin-bottom: 0;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 0;
            font-size: 18px;
        }

        /* (ì¤‘ìš”) ìº˜ë¦°ë” ì»¨í…Œì´ë„ˆì˜ ë¶ˆí•„ìš”í•œ ì—¬ë°± ì œê±° */
        #calendar-container {
            padding-top: 0px; /* í—¤ë”ë‘ ë„ˆë¬´ ë”± ë¶™ì§€ ì•Šê²Œ ì•½ê°„ë§Œ ë„ì›€ */
        }

        /* [ì¶”ê°€] ì˜¤ëŠ˜ ì´ë™ ë²„íŠ¼ (í”Œë¡œíŒ… ìŠ¤íƒ€ì¼) */
        .btn-floating-today {
            position: fixed;
            /* ìœ„ì¹˜ ê³„ì‚°: Topë²„íŠ¼ìœ„ì¹˜(25px) + ë²„íŠ¼ë†’ì´(45px) + ê°„ê²©(10px) = 80px */
            bottom: 80px;
            right: 25px; /* Top ë²„íŠ¼ê³¼ ê°™ì€ ë¼ì¸ */
            width: 45px; /* Top ë²„íŠ¼ê³¼ ë™ì¼ í¬ê¸° */
            height: 45px;
            background-color: #ffffff; /* í•˜ì–€ìƒ‰ ë°°ê²½ */
            color: #343a40; /* ê¸€ììƒ‰ì€ ì§„í•œ íšŒìƒ‰ (ê°€ë…ì„±) */
            border: 1px solid #dee2e6; /* ì–‡ì€ í…Œë‘ë¦¬ë¡œ ê¹”ë”í•˜ê²Œ */
            border-radius: 50%; /* ì™„ì „í•œ ì›í˜• */
            display: none; /* ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì¡°ê±´ ë§ì„ ë•Œë§Œ ë³´ì—¬ì¤Œ (flexë¡œ ë³€ê²½ë¨) */
            justify-content: center; /* ê¸€ì ê°€ìš´ë° ì •ë ¬ */
            align-items: center;
            font-size: 16px; /* ê¸€ì í¬ê¸° */
            font-weight: 800; /* êµµê²Œ */
            cursor: pointer;
            z-index: 4999; /* Top ë²„íŠ¼(5000)ë³´ë‹¤ëŠ” ì‚´ì§ ì•„ë˜ ë ˆì´ì–´ */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15); /* ê·¸ë¦¼ìë¡œ ì…ì²´ê° */
            /* ëª¨ë°”ì¼ í„°ì¹˜ ê¹œë¹¡ì„ ë°©ì§€ ë° ì• ë‹ˆë©”ì´ì…˜ */
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none; /* [ì¶”ê°€] ì•„ì´í°ìš© */
            user-select: none;
            transition: transform 0.2s, background-color 0.2s;
        }

        /* ëˆŒë €ì„ ë•Œ íš¨ê³¼ */
        .btn-floating-today:active {
            transform: scale(0.9); /* ì‚´ì§ ì‘ì•„ì§ */
            background-color: #f8f9fa; /* ì•„ì£¼ ì‚´ì§ ì–´ë‘ì›Œì§ */
        }

        #btn-back-to-top {
            position: fixed;
            bottom: 25px; /* ë°”ë‹¥ì—ì„œ 25px ë„ì›€ */
            right: 25px; /* ì˜¤ë¥¸ìª½ì—ì„œ 25px ë„ì›€ */
            width: 45px; /* ë²„íŠ¼ ë„ˆë¹„ */
            height: 45px; /* ë²„íŠ¼ ë†’ì´ */
            background-color: #343a40; /* ë²„íŠ¼ ìƒ‰ìƒ (ì§„í•œ íšŒìƒ‰) */
            color: white; /* í™”ì‚´í‘œ ìƒ‰ìƒ */
            border-radius: 50%; /* ì™„ì „í•œ ì›í˜• */
            display: none; /* ì²˜ìŒì—” ìˆ¨ê¹€ (ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ìŠ¤í¬ë¡¤ ë‚´ë¦¬ë©´ ë³´ì—¬ì¤Œ) */
            justify-content: center;
            align-items: center;
            font-size: 24px; /* í™”ì‚´í‘œ í¬ê¸° */
            font-weight: bold;
            cursor: pointer;
            z-index: 5000; /* íŒì—…ë³´ë‹¨ ì•„ë˜, ë‚´ìš©ë¬¼ë³´ë‹¨ ìœ„ì— */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); /* ê·¸ë¦¼ì íš¨ê³¼ */
            /* ëª¨ë°”ì¼ í„°ì¹˜ ì‹œ ê¹œë¹¡ì„ ë°©ì§€ */
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none; /* [ì¶”ê°€] ì•„ì´í°ìš© */
            user-select: none;
            transition: transform 0.2s, opacity 0.3s;
        }

        /* ëˆŒë €ì„ ë•Œ ì‚´ì§ ì‘ì•„ì§€ëŠ” íš¨ê³¼ */
        #btn-back-to-top:active {
            transform: scale(0.9);
        }

        .bottom-nav-container {
            margin-top: 15px !important; /* ìœ„ìª½ ë‹¬ë ¥ê³¼ì˜ ê°„ê²© */
            margin-bottom: 5px !important; /* í˜ì´ì§€ ë§¨ ë°”ë‹¥ê³¼ì˜ ê°„ê²© */
            width: 100%;
            display: flex;
            justify-content: center;
        }

        /* í•˜ë‹¨ ì œëª© í°íŠ¸ í¬ê¸° ê°•ì œ ì ìš© (ìƒë‹¨ê³¼ ë™ì¼í•˜ê²Œ) */
        #calendar-title-bottom {
            font-size: 32px;
            font-weight: 800;
            color: #495057;
        }

        /* [ì¶”ê°€] ëª¨ë“  ì´ë¯¸ì§€ ë“œë˜ê·¸ ë°©ì§€ (PC ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ ì°¨ë‹¨) */
        img {
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            -webkit-user-select: none; /* [ì¶”ê°€] ì•„ì´í°ìš© */
            user-select: none;
        }

        /* [ì¶”ê°€] PC ë²„ì „ ë ˆì´ì•„ì›ƒ ë³´ì • (ëª¨ë°”ì¼ ì•±ì²˜ëŸ¼ ê°€ìš´ë° ì •ë ¬) */
        @media (min-width: 768px) {
            body {
                max-width: 680px; /* ë„ˆë¹„ ì œí•œ (ë„ˆë¬´ ë„“ì–´ì§€ì§€ ì•Šê²Œ) */
                margin: 0 auto; /* í™”ë©´ ì¤‘ì•™ ì •ë ¬ */
                box-shadow: 0 0 30px rgba(0, 0, 0, 0.1); /* ì–‘ì˜†ì— ê·¸ë¦¼ì ì¤˜ì„œ ê³ ê¸‰ìŠ¤ëŸ½ê²Œ */
                min-height: 100vh; /* í™”ë©´ ê½‰ ì±„ìš°ê¸° */
                border-left: 1px solid #f1f3f5; /* ì–‘ì˜† í…Œë‘ë¦¬ */
                border-right: 1px solid #f1f3f5;
            }
            
            .top-logo {
                /* ì™¼ìª½ ê¸°ì¤€ì ì„ 'í™”ë©´ ì¤‘ì•™'ìœ¼ë¡œ ë³€ê²½ */
                left: calc(50% - 340px + 20px) !important;
                /* ì„¤ëª…: ì¤‘ì•™(50%) - ìº˜ë¦°ë”ì ˆë°˜(340px) + ì™¼ìª½ì—¬ë°±(20px) */
                font-size: 40px !important;
                top: 20px !important; /* ìœ„ìª½ ì—¬ë°± 20px */
                position: absolute !important;
            }

            /* 2. ìŠ¤í‹°í‚¤ í—¤ë” ìœ„ì¹˜ êµì • (ì™¼ìª½ íŠ€ì–´ë‚˜ì˜´ í•´ê²°) */
            #sticky-header {
                max-width: 680px; /* ëª¸í†µ í¬ê¸°ì™€ ë˜‘ê°™ì´ */
                width: 100% !important;
                box-sizing: border-box !important;
                /* ëª¨ë°”ì¼ìš© ë§ˆì´ë„ˆìŠ¤ ë§ˆì§„ í•´ì œ (ì´ê²Œ ì™¼ìª½ ì ë¦¼ì˜ ì›ì¸) */
                margin-left: 0 !important;
                margin-right: 0 !important;
                padding-top: 20px !important;
                padding-bottom: 20px !important;
                margin-top: 0 !important;
                padding-left: 20px !important; /* ë‚´ë¶€ ì—¬ë°± ì¬ì¡°ì • */
                padding-right: 20px !important;
                left: auto !important;
                transform: none !important;
            }

            /* 3. í”Œë¡œíŒ… ë²„íŠ¼ë“¤ì„ ìº˜ë¦°ë” 'ë°”ê¹¥ ì˜¤ë¥¸ìª½'ìœ¼ë¡œ ì´ë™ */
            #btn-back-to-top,
            .btn-floating-today {
                right: auto !important; /* ê¸°ì¡´ ì˜¤ë¥¸ìª½ ê¸°ì¤€ ìœ„ì¹˜ ë¬´ì‹œ */
                /* [ê³„ì‚°ì‹] í™”ë©´ ì¤‘ì•™(50%) + ìº˜ë¦°ë”ì ˆë°˜(240px) + ì—¬ë°±(20px) = ì˜¤ë¥¸ìª½ ë°”ê¹¥ */
                left: calc(50% + 340px + 22px) !important;
            }
        }

        /* [ì¶”ê°€] ê³µì§€ íŒì—… ì „ìš© ìŠ¤íƒ€ì¼ */
        body.no-scroll {
            overflow: hidden;
            touch-action: none; /* ëª¨ë°”ì¼ì—ì„œ í„°ì¹˜ ìŠ¤í¬ë¡¤ë„ ë°©ì§€ */
        }

        .notice-box {
            text-align: left; /* ê¸€ì ì™¼ìª½ ì •ë ¬ */
            padding: 15px 15px;
            max-width: 340px; /* ì¡°ê¸ˆ ë” ë„“ê²Œ */
        }

        .notice-header {
            font-size: 22px;
            font-weight: 800;
            color: #212529;
            margin-bottom: 10px;
            text-align: center; /* ì œëª©ë§Œ ê°€ìš´ë° */
        }

        .notice-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .notice-item {
            display: flex;
            align-items: flex-start; /* ì•„ì´ì½˜ê³¼ ê¸€ì ë†’ì´ ë§ì¶¤ */
            gap: 10px;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            font-size: 18px;
            color: #495057;
            line-height: 1.3;
            font-weight: 500;
        }

        .notice-text b {
            color: #e03131; /* ê°•ì¡°ìƒ‰ (ë¹¨ê°•) */
            font-weight: 700;
        }

        /* 2. ë²„íŠ¼ ëˆŒë €ì„ ë•Œ íŒŒë€ìƒ‰ ê¹œë¹¡ì„ ì œê±° */
        .confirm-btn {
            font-size: 18px;
            -webkit-tap-highlight-color: transparent; /* ì•„ì´í° í„°ì¹˜ í•˜ì´ë¼ì´íŠ¸ ì œê±° */
            outline: none;
            transition: opacity 0.2s, transform 0.1s;
        }

        .confirm-btn:hover {
            opacity: 0.9;
        }

        /* [ìˆ˜ì •ë¨] ìš°ì¸¡ ìƒë‹¨ í”Œë¡œíŒ… ë²„íŠ¼ ê·¸ë£¹ (ì¡°ê±´ ë²„íŠ¼ + ì•Œë¦¼ ë²„íŠ¼) */
        #floating-group {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001; /* í—¤ë”ë³´ë‹¤ ìœ„ì— */
            display: flex; /* ê°€ë¡œ ë°°ì¹˜ */
            gap: 12px; /* ë²„íŠ¼ ì‚¬ì´ ê°„ê²© */
            align-items: center;
        }

        /* ê³µí†µ ì›í˜• ë²„íŠ¼ ë””ìì¸ (ê¸°ì¡´ ì¢… ë²„íŠ¼ ìŠ¤íƒ€ì¼) */
        .round-btn {
            width: 40px;
            height: 40px;
            background-color: #ffffff;
            border-radius: 50%;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            cursor: pointer;
            transition: transform 0.2s;
            -webkit-tap-highlight-color: transparent;
            outline: none;
            border: none;
            text-decoration: none;
        }

        /*.round-btn:active { transform: scale(0.9); } */

        /* ì¡°ê±´ ë²„íŠ¼ í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ (ì‘ì€ ì› ì•ˆì— ê¸€ìê°€ ë“¤ì–´ê°€ë¯€ë¡œ í¬ê¸° ì¡°ì ˆ) */
        .btn-txt-style {
            font-size: 20px;
            font-weight: 400;
            color: #343a40;
            line-height: 1;
        }

        /* PC ë²„ì „ ìœ„ì¹˜ ë³´ì • (ê·¸ë£¹ ì „ì²´ ì´ë™) */
        @media (min-width: 768px) {
            #floating-group {
                /* PCë²„ì „ì—ì„œëŠ” ìº˜ë¦°ë” ì˜¤ë¥¸ìª½ ë°”ê¹¥ì— ìœ„ì¹˜ */
                right: auto !important;
                left: calc(50% + 340px + 24px) !important;
                top: 20px;
            }
        }

        /* [ì¶”ê°€] ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ */
        .custom-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ced4da;
            border-radius: 8px;
            font-size: 16px;
            outline: none;
            box-sizing: border-box;
            -webkit-user-select: text !important;
            user-select: text !important;
        }

        .custom-input:focus {
            border-color: #343a40;
            border-width: 2px;
            padding: 11px;
        }

        /* [ì¶”ê°€/ìˆ˜ì •] í‚¤ì›Œë“œ ëª¨ë‹¬ ë‚´ë¶€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .keyword-btn-row {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        /* í°ìƒ‰ ë²„íŠ¼ (ë“±ë¡í•œ í‚¤ì›Œë“œ í™•ì¸ìš©) */
        .btn-white {
            flex: 1;
            padding: 12px 0;
            border-radius: 8px;
            font-size: 18px !important;
            font-weight: 700;
            cursor: pointer;
            background-color: #ffffff;
            color: #343a40;
            border: 1px solid #ced4da;
            transition: all 0.2s;
            -webkit-tap-highlight-color: transparent; /* ëª¨ë°”ì¼ í„°ì¹˜ ì‹œ íŒŒë€ ë°•ìŠ¤ ì œê±° */
            outline: none; /* í´ë¦­ ì‹œ íŒŒë€ í…Œë‘ë¦¬(Focus Ring) ì œê±° */
        }

        .btn-white:hover { background-color: #f8f9fa; }

        /* ë¹¨ê°„ ë²„íŠ¼ (ë“±ë¡ìš©) */
        .btn-red {
            flex: 1;
            padding: 12px 0;
            border-radius: 8px;
            font-size: 18px !important;
            font-weight: 700;
            cursor: pointer;
            background-color: #fa5252;
            color: white;
            border: none;
        }

        .btn-red:hover { opacity: 0.9; }

        /* [ì¶”ê°€] ë‚´ í‚¤ì›Œë“œ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        #my-keyword-list {
            list-style: none;
            padding: 0;
            margin: 0;
            max-height: 200px; /* ë„ˆë¬´ ê¸¸ì–´ì§€ë©´ ìŠ¤í¬ë¡¤ */
            overflow-y: auto;
            text-align: left;
            border-top: 1px solid #eee;
            margin-top: 10px;
            display: none; /* ì²˜ìŒì—” ìˆ¨ê¹€ */
        }

        .my-keyword-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 5px;
            border-bottom: 1px solid #f1f3f5;
            font-size: 18px;
            color: #495057;
        }

        .btn-delete-keyword {
            background: none;
            border: none;
            color: #adb5bd;
            font-size: 16px;
            cursor: pointer;
            padding: 5px;
        }

        /* [ì¶”ê°€] ì»¤ìŠ¤í…€ ì•Œë¦¼ì°½ (Alert ëŒ€ì²´) */
        #customAlertModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.3);
            z-index: 30000;
            justify-content: center;
            align-items: center;
        }

        .custom-alert-content {
            background: white;
            width: 80%;
            max-width: 300px;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .custom-alert-msg { font-size: 18px; font-weight: 600; color: #343a40; margin-bottom: 20px; word-break: keep-all; line-height: 1.5; }
        
        .btn-alert-ok {
            width: 100%;
            padding: 10px 0;
            background-color: #343a40;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            -webkit-tap-highlight-color: transparent;
            outline: none;
            transition: opacity 0.2s; /* ë¶€ë“œëŸ¬ìš´ íš¨ê³¼ */
        }

        .btn-alert-ok:hover {
            opacity: 0.9;
        }
    </style>
</head>
<body class="initial-mode" role="application">
<div id="exitConfirmModal" class="modal-overlay" style="display: none; z-index: 60000; background-color: rgba(0,0,0,0.5);">
    <div class="confirm-content" onclick="event.stopPropagation()" style="text-align: center; max-width: 300px;">
        <div style="font-size: 20px; font-weight: 700; color: #343a40; margin-bottom: 20px;">
            ì‡¼ì½•ì„ ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
        </div>
        <div class="confirm-btn-group" style="display: flex; gap: 10px;">
            <button onclick="confirmExitApp()" class="confirm-btn btn-yes" style="flex: 1;">í™•ì¸</button>
            <button onclick="cancelExitApp()" class="confirm-btn btn-no" style="flex: 1; background-color: #e9ecef; color: #495057;">ì·¨ì†Œ</button>
        </div>
    </div>
</div>    
<div id="introModal" class="modal-overlay" style="display: flex; z-index: 30000; background-color: #ffffff;">
    <div class="confirm-content" onclick="event.stopPropagation()" style="text-align: left; max-width: 350px;">
        
        <div class="modal-header" style="margin-bottom: 20px; text-align: center;">
            <span style="font-size: 22px; font-weight: 800; color: #343a40;">ì¡°ê±´ì„ ì„ íƒí•´ì£¼ì„¸ìš”ğŸ‰</span>
        </div>

        <div class="control-bar" style="margin: 0; padding: 0;">
            <div class="filter-group">
                <span class="group-title">ì§€ì—­ :</span>
                <div class="chk-list">
                    <label><input type="checkbox" class="intro-region-chk" value="ì„œìš¸"> <span class="txt-red">ì„œìš¸</span></label>
                    <label><input type="checkbox" class="intro-region-chk" value="ê²½ê¸°"> <span class="txt-red">ê²½ê¸°/ì¸ì²œ</span></label>
                    <label><input type="checkbox" class="intro-region-chk" value="ê·¸ ì™¸"> <span class="txt-blue">ê·¸ ì™¸ ì§€ì—­</span></label>
                </div>
            </div>

            <div class="filter-group" style="margin-top: 8px;">
                <span class="group-title">ì¥ë¥´ :</span>
                <div class="chk-list">
                    <label><input type="checkbox" class="intro-genre-chk" value="ì½˜ì„œíŠ¸" checked> <span class="txt-black">ì½˜ì„œíŠ¸</span></label>
                    <label><input type="checkbox" class="intro-genre-chk" value="ë®¤ì§€ì»¬" checked> <span class="txt-black">ë®¤ì§€ì»¬</span></label>
                    <label><input type="checkbox" class="intro-genre-chk" value="ì—°ê·¹" checked> <span class="txt-black">ì—°ê·¹</span></label>
                    <label><input type="checkbox" class="intro-genre-chk" value="í´ë˜ì‹" checked> <span class="txt-black">í´ë˜ì‹</span></label>
                    <label><input type="checkbox" class="intro-genre-chk" value="í–‰ì‚¬(ì „ì‹œ)" checked> <span class="txt-black">í–‰ì‚¬(ì „ì‹œ)</span></label>
                    <label><input type="checkbox" class="intro-genre-chk" value="ë§ˆìˆ " checked> <span class="txt-black">ë§ˆìˆ </span></label>
                    <label style="cursor: not-allowed;">
                        <input type="checkbox" class="intro-genre-chk" value="ê°€ì¡±" disabled> 
                        <span class="txt-black" style="color: #adb5bd;">ê°€ì¡±</span>
                    </label>

                    <button id="btn-intro-reset" class="btn-reset" onclick="toggleIntroReset()">ëª¨ë‘í•´ì œ</button>
                </div>
            </div>
        </div>
        
        <div class="confirm-btn-group" style="margin-top: 12px;">
            <button onclick="startProcess()" class="confirm-btn btn-yes">ì ìš©í•˜ê¸°</button>
        </div>
    </div>
</div>

<div id="loadingOverlay" style="
    display: none; 
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
    background: rgba(255,255,255,1); 
    z-index: 40000; 
    justify-content: center; align-items: center; flex-direction: column;">
    <div class="loading-spinner"></div>
    <div style="font-size: 20px; font-weight: 700; color: #495057; text-align: center; width: 100%; line-height: 1.5;">ë§ì€ ê³µì—°ì„ ë³´ì—¬ë“œë¦´í…Œë‹ˆ<br>ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”!</div>
</div>
    <div class="top-logo">ğŸ“Œ</div>

    <div id="sticky-header">

        <div class="header-wrapper">
            <div class="nav-row">
                <div class="nav-btn" id="prev-btn">&lt;</div>
                <div class="sub-title" id="calendar-title">Loading...</div>
                <div class="nav-btn" id="next-btn">&gt;</div>
            </div>
        </div>
    </div>
    <div id="calendar-container">
        <div id="page-0" class="calendar-page" data-title="2026ë…„ 1ì›”" style="display: block;">
            <table>
                <thead><tr><th>ì¼</th><th>ì›”</th><th>í™”</th><th>ìˆ˜</th><th>ëª©</th><th>ê¸ˆ</th><th>í† </th></tr></thead>
                <tbody>
                    <tr><td class='sun'></td><td></td><td></td><td></td><td><span class='date-num' data-dayname='ëª©'>1</span></td><td><span class='date-num' data-dayname='ê¸ˆ'>2</span></td><td class='sat'><span class='date-num' data-dayname='í† '>3</span></td></tr>
                    <tr><td class='sun'><span class='date-num' data-dayname='ì¼'>4</span></td><td><span class='date-num' data-dayname='ì›”'>5</span></td><td><span class='date-num' data-dayname='í™”'>6</span></td><td><span class='date-num' data-dayname='ìˆ˜'>7</span></td><td><span class='date-num' data-dayname='ëª©'>8</span></td><td><span class='date-num' data-dayname='ê¸ˆ'>9</span></td><td class='sat'><span class='date-num' data-dayname='í† '>10</span></td></tr>
                    <tr><td class='sun'><span class='date-num' data-dayname='ì¼'>11</span></td><td><span class='date-num' data-dayname='ì›”'>12</span></td><td><span class='date-num' data-dayname='í™”'>13</span></td><td><span class='date-num' data-dayname='ìˆ˜'>14</span></td><td><span class='date-num' data-dayname='ëª©'>15</span></td><td><span class='date-num' data-dayname='ê¸ˆ'>16</span></td><td class='sat'><span class='date-num' data-dayname='í† '>17</span></td></tr>
                    <tr><td class='sun'><span class='date-num' data-dayname='ì¼'>18</span></td><td><span class='date-num' data-dayname='ì›”'>19</span></td><td><span class='date-num' data-dayname='í™”'>20</span></td><td><span class='date-num' data-dayname='ìˆ˜'>21</span></td><td><span class='date-num' data-dayname='ëª©'>22</span></td><td><span class='date-num' data-dayname='ê¸ˆ'>23</span></td><td class='sat'><span class='date-num' data-dayname='í† '>24</span></td></tr>
                    <tr><td class='sun'><span class='date-num' data-dayname='ì¼'>25</span></td><td><span class='date-num' data-dayname='ì›”'>26</span></td><td><span class='date-num' data-dayname='í™”'>27</span></td><td><span class='date-num' data-dayname='ìˆ˜'>28</span></td><td><span class='date-num' data-dayname='ëª©'>29</span></td><td><span class='date-num' data-dayname='ê¸ˆ'>30</span></td><td class='sat'><span class='date-num' data-dayname='í† '>31</span></td></tr>
                </tbody>
            </table>
        </div>

        <div id="page-1" class="calendar-page" data-title="2026ë…„ 2ì›”" style="display: none;">
            <table>
                <thead><tr><th>ì¼</th><th>ì›”</th><th>í™”</th><th>ìˆ˜</th><th>ëª©</th><th>ê¸ˆ</th><th>í† </th></tr></thead>
                <tbody>
                    <tr><td class='sun'><span class='date-num' data-dayname='ì¼'>1</span></td><td><span class='date-num' data-dayname='ì›”'>2</span></td><td><span class='date-num' data-dayname='í™”'>3</span></td><td><span class='date-num' data-dayname='ìˆ˜'>4</span></td><td><span class='date-num' data-dayname='ëª©'>5</span></td><td><span class='date-num' data-dayname='ê¸ˆ'>6</span></td><td class='sat'><span class='date-num' data-dayname='í† '>7</span></td></tr>
                    <tr><td class='sun'><span class='date-num' data-dayname='ì¼'>8</span></td><td><span class='date-num' data-dayname='ì›”'>9</span></td><td><span class='date-num' data-dayname='í™”'>10</span></td><td><span class='date-num' data-dayname='ìˆ˜'>11</span></td><td><span class='date-num' data-dayname='ëª©'>12</span></td><td><span class='date-num' data-dayname='ê¸ˆ'>13</span></td><td class='sat'><span class='date-num' data-dayname='í† '>14</span></td></tr>
                    <tr><td class='sun'><span class='date-num' data-dayname='ì¼'>15</span></td><td><span class='date-num' data-dayname='ì›”'>16</span></td><td><span class='date-num' data-dayname='í™”'>17</span></td><td><span class='date-num' data-dayname='ìˆ˜'>18</span></td><td><span class='date-num' data-dayname='ëª©'>19</span></td><td><span class='date-num' data-dayname='ê¸ˆ'>20</span></td><td class='sat'><span class='date-num' data-dayname='í† '>21</span></td></tr>
                    <tr><td class='sun'><span class='date-num' data-dayname='ì¼'>22</span></td><td><span class='date-num' data-dayname='ì›”'>23</span></td><td><span class='date-num' data-dayname='í™”'>24</span></td><td><span class='date-num' data-dayname='ìˆ˜'>25</span></td><td><span class='date-num' data-dayname='ëª©'>26</span></td><td><span class='date-num' data-dayname='ê¸ˆ'>27</span></td><td class='sat'><span class='date-num' data-dayname='í† '>28</span></td></tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="header-wrapper bottom-nav-container">
        <div class="nav-row">
            <div class="nav-btn" id="prev-btn-bottom">&lt;</div>

            <div class="sub-title" id="calendar-title-bottom">Loading...</div>

            <div class="nav-btn" id="next-btn-bottom">&gt;</div>
        </div>
    </div>

    <div id="eventModal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-poster-area">
                <img id="modalPoster" src="" alt="ê³µì—° í¬ìŠ¤í„°" style="display:none;" oncontextmenu="return false;">
                <span id="noPosterText" class="no-poster-text" style="display:none;">ì´ë¯¸ì§€ ì—†ìŒ</span>
            </div>
            <div class="modal-body">
                <div id="modalTitle" class="modal-title"></div>
                <div id="modalInfo" class="modal-info"></div>

                <div id="modalTicketing" class="modal-ticketing"></div>
                <div class="modal-btn-container" id="btnGroup"></div>
            </div>
        </div>
    </div>

    <div id="confirmModal" class="modal-overlay" style="z-index: 10000; align-items: center; padding-top: 0;" onclick="closeConfirmModal(event)">
        <div class="confirm-content" onclick="event.stopPropagation()">
            <div class="confirm-text">
                ë‹¤ìš´ë¡œë“œ ë˜ëŠ” ics íŒŒì¼ì„ ì—´ë©´<br>ìº˜ë¦°ë” ì•±ì— ì¼ì • ì¶”ê°€ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.<br>ë‹¤ìš´ë¡œë“œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
            </div>
            <div class="confirm-btn-group">
                <button onclick="realDownload()" class="confirm-btn btn-yes">í™•ì¸</button>
                <button onclick="closeConfirmModal()" class="confirm-btn btn-no">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <div id="imageZoomOverlay" onclick="closeZoomOverlay()">
        <span class="close-zoom" onclick="closeZoomOverlay()">&times;</span>
        <img id="zoomedImage" src="" oncontextmenu="return false;">
    </div>
    <div id="btn-go-today" class="btn-floating-today">ì˜¤ëŠ˜</div>
    <div id="btn-back-to-top" onclick="scrollToTop()">â†‘</div>

    <div id="mainNoticeModal" class="modal-overlay" style="z-index: 20000; display: none;">
        <div class="confirm-content notice-box" onclick="event.stopPropagation()">
            <div class="notice-header">ğŸ“¢ ì•Œë¦¼</div>

            <div class="notice-list">
                <div class="notice-item">
                    <span class="notice-icon" style="font-size: 22px; position: relative; top: -2px;">ğŸ«</span>
                    <span class="notice-text">
                        <b>ì„ ì˜ˆë§¤</b>ê°€ ìˆëŠ” ê³µì—°ì˜<br>
                        ì´í›„ ì˜ˆë§¤ ì¼ì •(ì¼ë°˜ì˜ˆë§¤)ì€<br>
                        ìº˜ë¦°ë”ì— ì—†ìŠµë‹ˆë‹¤(ë§¤ì§„ ê°€ëŠ¥ì„±)
                    </span>
                </div>

                <div id="pwa-msg" class="notice-item">
                    <span class="notice-icon" style="font-size: 19px; margin-right: 3px;">ğŸ¤</span>
                    <span class="notice-text">
                        íŒ¬ë¯¸íŒ…ì€ ì½˜ì„œíŠ¸ì— í¬í•¨ë¼ìˆìŠµë‹ˆë‹¤
                    </span>
                </div>
            </div>

            <button onclick="closeNoticePopup()" class="confirm-btn btn-yes" style="width: 100%; margin-top: 15px;">í™•ì¸</button>
        </div>
    </div>

    <div id="floating-group">
        <button class="round-btn btn-txt-style" onclick="openConditionModal()">
            â˜°
        </button>

        <div class="round-btn" onclick="openKeywordModal()">
            ğŸ””
        </div>
    </div>

    <div id="keywordModal" class="modal-overlay" onclick="closeKeywordModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()" style="padding: 15px 15px;">
            <div class="modal-header" style="margin-bottom: 10px; text-align: center;">
                <span style="font-size: 22px; font-weight: 800;">ğŸ”” ê³µì—° ì¼ì • ì•Œë¦¼</span>
            </div>

            <div style="text-align: left; margin-bottom: 10px; color: #495057; line-height: 1.3; font-size: 18px; font-weight: 500; padding: 0 5px;">
                ë³´ê³ ì‹¶ì€ ê³µì—°ì˜ í‚¤ì›Œë“œë¥¼ ë“±ë¡í•´ì£¼ì„¸ìš”.(ì¥ë¥´X)<br>
                ì¼ì •ì´ ì¶”ê°€ë˜ë©´ ì•Œë¦¼ì„ ë³´ë‚´ë“œë¦´ê²Œìš”.
            </div>

            <div style="display: flex; flex-direction: column; gap: 10px;">
                <input type="text" id="input-keyword" class="custom-input" placeholder="í‚¤ì›Œë“œ ì…ë ¥ (ì˜ˆ: ì§€í‚¬ì•¤í•˜ì´ë“œ, ì„±ì‹œê²½, ë‚´í•œ)" style="background-color: #f8f9fa;">
            </div>

            <div class="keyword-btn-row">
                <button onclick="viewMyKeywords()" class="btn-white">ë‚´ í‚¤ì›Œë“œ</button>
                <button onclick="submitKeyword()" class="confirm-btn btn-red">í‚¤ì›Œë“œ ë“±ë¡</button>
            </div>

            <ul id="my-keyword-list">
            </ul>
        </div>
    </div>

    <div id="customAlertModal" class="modal-overlay" onclick="closeCustomAlert()" style="z-index: 50000;">
    <div class="confirm-content" onclick="event.stopPropagation()">
        
        <div id="customAlertMsg" class="confirm-text" style="text-align: center; margin-bottom: 20px; font-size: 20px;">
            ì•Œë¦¼ ë©”ì‹œì§€
        </div>

        <div class="confirm-btn-group">
            <button onclick="closeCustomAlert()" class="confirm-btn btn-yes">í™•ì¸</button>
        </div>
    </div>
    </div>
    <div id="conditionModal" class="modal-overlay" onclick="closeConditionModal(event)">
    <div class="confirm-content" onclick="event.stopPropagation()" style="text-align: left; max-width: 350px;">
        
        <div class="modal-header" style="margin-bottom: 20px; text-align: center;">
            <span style="font-size: 22px; font-weight: 800; color: #343a40;">ì¡°ê±´ ì„¤ì •</span>
        </div>

        <div class="control-bar" style="margin: 0; padding: 0;">
            <div class="filter-group">
                <span class="group-title">ì§€ì—­ :</span>
                <div class="chk-list">
                    <label><input type="checkbox" class="region-chk" value="ì„œìš¸"> <span class="txt-red">ì„œìš¸</span></label>
                    <label><input type="checkbox" class="region-chk" value="ê²½ê¸°"> <span class="txt-red">ê²½ê¸°/ì¸ì²œ</span></label>
                    <label><input type="checkbox" class="region-chk" value="ê·¸ ì™¸"> <span class="txt-blue">ê·¸ ì™¸ ì§€ì—­</span></label>
                </div>
            </div>

            <div class="filter-group" style="margin-top: 8px;">
                <span class="group-title">ì¥ë¥´ :</span>
                <div class="chk-list">
                    <label><input type="checkbox" class="genre-chk" value="ì½˜ì„œíŠ¸" checked> <span class="txt-black">ì½˜ì„œíŠ¸</span></label>
                    <label><input type="checkbox" class="genre-chk" value="ë®¤ì§€ì»¬" checked> <span class="txt-black">ë®¤ì§€ì»¬</span></label>
                    <label><input type="checkbox" class="genre-chk" value="ì—°ê·¹" checked> <span class="txt-black">ì—°ê·¹</span></label>
                    <label><input type="checkbox" class="genre-chk" value="í´ë˜ì‹" checked> <span class="txt-black">í´ë˜ì‹</span></label>
                    <label><input type="checkbox" class="genre-chk" value="í–‰ì‚¬(ì „ì‹œ)" checked> <span class="txt-black">í–‰ì‚¬(ì „ì‹œ)</span></label>
                    <label><input type="checkbox" class="genre-chk" value="ë§ˆìˆ " checked> <span class="txt-black">ë§ˆìˆ </span></label>
                    <label style="cursor: not-allowed;">
                        <input type="checkbox" class="genre-chk" value="ê°€ì¡±" disabled> 
                        <span class="txt-black" style="color: #adb5bd;">ê°€ì¡±</span>
                    </label>
                    <button id="btn-reset" class="btn-reset">ëª¨ë‘í•´ì œ</button>
                </div>
            </div>
        </div>
        <div class="confirm-btn-group" style="margin-top: 12px;">
            <button onclick="applyAndClose()" class="confirm-btn btn-yes">ì ìš©í•˜ê¸°</button>
        </div>

    </div>
    </div>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getMessaging, getToken, onMessage } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-messaging.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCc1GvgMaWHZtAa_zTRqL0fj3l5B4zzg50",
            authDomain: "showkok.firebaseapp.com",
            projectId: "showkok",
            storageBucket: "showkok.firebasestorage.app",
            messagingSenderId: "42586284108",
            appId: "1:42586284108:web:f2020d0452b02fa23554e9",
            measurementId: "G-HXGN9LHRJT"
        };

        const app = initializeApp(firebaseConfig);
        const messaging = getMessaging(app);

        // ë‹¤ë¥¸ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì“¸ ìˆ˜ ìˆê²Œ windowì— ì €ì¥
        window.messaging = messaging;
        window.getToken = getToken;
        
        // â–¼â–¼â–¼ [ì¶”ê°€í•  ì½”ë“œ] ì•±ì„ ë³´ê³  ìˆì„ ë•Œ(Foreground) ì•Œë¦¼ ë„ìš°ê¸° â–¼â–¼â–¼
        onMessage(messaging, (payload) => {
            console.log('í¬ê·¸ë¼ìš´ë“œ ë©”ì‹œì§€ ìˆ˜ì‹ :', payload);

            // ì„œë²„ì—ì„œ ë³´ë‚¸ dataë‚˜ notification êº¼ë‚´ê¸°
            const data = payload.data || payload.notification;

            if (data) {
                const title = data.title;
                const options = {
                    body: data.body,
                    icon: 'https://showkok.com/icon-192.png',
                    badge: 'https://showkok.com/badge.png', // íˆ¬ëª… ì•„ì´ì½˜ ê²½ë¡œ í™•ì¸!
                    data: {
                        url: data.url
                    }
                };

                // ë¸Œë¼ìš°ì € ì•Œë¦¼ ê°•ì œ ì‹¤í–‰ (Service Worker ë¹Œë ¤ì˜¤ê¸°)
                navigator.serviceWorker.ready.then((registration) => {
                    registration.showNotification(title, options);
                });
            }
        });
        // ì˜ˆ: 'ì•Œë¦¼ ë°›ê¸°' ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ì‹¤í–‰ë  í•¨ìˆ˜
        // window. ì„ ë¶™ì—¬ì„œ ì „ì—­ ë³€ìˆ˜ë¡œ ë§Œë“­ë‹ˆë‹¤.
        window.requestNotificationPermission = function () {
            Notification.requestPermission().then((permission) => {
                if (permission === 'granted') {
                    alert("ì•Œë¦¼ ê¶Œí•œì´ í—ˆìš©ë˜ì—ˆìŠµë‹ˆë‹¤!");
                } else {
                    alert("ì•Œë¦¼ ê¶Œí•œì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ì•± ì„¤ì •ì—ì„œ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.");
                }
            });
        }
    </script>
    <script>
        const SUPABASE_URL = 'https://btvwssnlrwvzgqdbcuti.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ0dndzc25scnd2emdxZGJjdXRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc1MjczMDIsImV4cCI6MjA4MzEwMzMwMn0.NF-nG9Dtwe__p5Xmzz4dmFT56B4XN77oBJlJxnPnDdM'; // ì—¬ê¸°ì— anon key ì…ë ¥

        const client = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        // [ìˆ˜ì •] ì»¤ìŠ¤í…€ ì•Œë¦¼ì°½ ì—´ê¸° (ê¸°ë¡ ì¶”ê°€)
        function openCustomAlert(msg) {
             document.getElementById('customAlertMsg').innerHTML = msg;
             document.getElementById('customAlertModal').style.display = 'flex';
             // ì•Œë¦¼ì°½ë„ 'ë’¤ë¡œê°€ê¸°'ë¡œ ë‹«ì„ ìˆ˜ ìˆê²Œ ê¸°ë¡ì„ ë‚¨ê¹ë‹ˆë‹¤.
             history.pushState({ view: 'alert' }, '', '');
        }

        // [ìˆ˜ì •] ì»¤ìŠ¤í…€ ì•Œë¦¼ì°½ ë‹«ê¸° (ë’¤ë¡œê°€ê¸° ì‹¤í–‰)
        function closeCustomAlert() {
             // í™”ë©´ì— ë–  ìˆë‹¤ë©´ ë’¤ë¡œê°€ê¸°ë¥¼ ëˆŒëŸ¬ì„œ ë‹«ìŠµë‹ˆë‹¤.
             if (document.getElementById('customAlertModal').style.display === 'flex') {
                  history.back();
             }
        }

        // [ìˆ˜ì •] í‚¤ì›Œë“œ ë“±ë¡ í•¨ìˆ˜ (Alert ëŒ€ì‹  ì»¤ìŠ¤í…€ ì•Œë¦¼ ì‚¬ìš©)
        async function submitKeyword() {
            const keywordInput = document.getElementById('input-keyword');
            const keyword = keywordInput.value.trim();

            if (!keyword) {
                openCustomAlert("í‚¤ì›Œë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return;
            }

            const btn = document.querySelector('#keywordModal .btn-red');
            const originalText = btn.innerText;
            btn.innerText = "ì €ì¥ ì¤‘...";
            btn.disabled = true;

            try {
                // 1. ê¶Œí•œ í™•ì¸
                const permission = await Notification.requestPermission();
                if (permission !== 'granted') {
                    openCustomAlert("ì•Œë¦¼ ê¶Œí•œì„ í—ˆìš©í•´ì•¼<br>ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”!");
                    throw new Error("ê¶Œí•œ ê±°ë¶€ë¨");
                }

                // 2. í† í° ê°€ì ¸ì˜¤ê¸° (ì´ë¯¸ ìˆìœ¼ë©´ ìºì‹œëœ ê²ƒ ê°€ì ¸ì˜´)
                const token = await window.getToken(window.messaging, {
                    vapidKey: "BI7wflO-MlNm_zsb2KxNrKbszAWRxBnweRDOddyFqKvnpUvoA_cgPXKB1_IhoPymFN1Js0JOTq8CZ8__w5kqYp8",
                    serviceWorkerRegistration: await navigator.serviceWorker.register('/sw.js')
                });

                if (!token) throw new Error("í† í° ìƒì„± ì‹¤íŒ¨");

                // 3. Supabase ì €ì¥
                const { data, error } = await client
                    .from('keyword_alerts')
                    .insert([{ keyword: keyword, fcm_token: token }]);

                if (error) throw error;

                viewMyKeywords(true)

                openCustomAlert(`ì•Œë¦¼ í‚¤ì›Œë“œë¡œ ë“±ë¡ë˜ì—ˆì–´ìš”ğŸ‰<br><b>${keyword}</b>ì— ëŒ€í•œ ê³µì—° ì¼ì •ì´ ì¶”ê°€ë˜ë©´<br>ì•Œë¦¼ì„ ë³´ë‚´ë“œë¦´ê²Œìš”`);
                keywordInput.value = '';

            } catch (err) {
                console.error(err);
                if (err.message !== "ê¶Œí•œ ê±°ë¶€ë¨") {
                    openCustomAlert("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”.<br>ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                }
            } finally {
                btn.innerText = originalText;
                btn.disabled = false;
            }
        }

        // [ìˆ˜ì •] ë‚´ê°€ ë“±ë¡í•œ í‚¤ì›Œë“œ ì¡°íšŒ í•¨ìˆ˜ (autoCheck íŒŒë¼ë¯¸í„° ì¶”ê°€)
        async function viewMyKeywords(isRefresh = false, autoCheck = false) {
            const listArea = document.getElementById('my-keyword-list');
            const btn = document.querySelector('#keywordModal .btn-white');

            // 1. [ìˆ˜ì •] ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ë‹«ëŠ” ê¸°ëŠ¥ (ìë™ ì²´í¬ ëª¨ë“œê°€ ì•„ë‹ ë•Œë§Œ ë™ì‘)
            if (!isRefresh && !autoCheck && listArea.style.display === 'block') {
                listArea.style.display = 'none';
                return;
            }

            // 2. [ìˆ˜ì •] ìë™ ì²´í¬ ëª¨ë“œì¼ ë•ŒëŠ” ë²„íŠ¼ í…ìŠ¤íŠ¸ë¥¼ "ë¡œë”© ì¤‘"ìœ¼ë¡œ ë°”ê¾¸ì§€ ì•ŠìŒ
            let originalText = "";
            if (!autoCheck) {
                originalText = btn.innerText;
                btn.innerText = "ë¡œë”© ì¤‘...";
                btn.disabled = true;
            }

            try {
                const token = await window.getToken(window.messaging, {
                    vapidKey: "BI7wflO-MlNm_zsb2KxNrKbszAWRxBnweRDOddyFqKvnpUvoA_cgPXKB1_IhoPymFN1Js0JOTq8CZ8__w5kqYp8",
                    serviceWorkerRegistration: await navigator.serviceWorker.register('/sw.js')
                });

                if (!token) return;

                const { data, error } = await client
                    .from('keyword_alerts')
                    .select('*')
                    .eq('fcm_token', token)
                    .order('created_at', { ascending: false });

                if (error) throw error;

                listArea.innerHTML = '';

                // 3. [í•µì‹¬ ìˆ˜ì •] ë°ì´í„° ìœ ë¬´ì— ë”°ë¥¸ ì²˜ë¦¬ ë¡œì§
                if (data.length === 0) {
                    // ë°ì´í„°ê°€ ì—†ì„ ë•Œ
                    if (autoCheck) {
                        // [ìë™ ëª¨ë“œ] -> ë¦¬ìŠ¤íŠ¸ë¥¼ ì•„ì˜ˆ ìˆ¨ê¹€ (ì ‘ì–´ë‘ê¸°)
                        listArea.style.display = 'none';
                    } else {
                        // [ì§ì ‘ í´ë¦­] -> "ì—†ìŠµë‹ˆë‹¤" ë©”ì‹œì§€ ë³´ì—¬ì£¼ê³  í¼ì¹˜ê¸°
                        listArea.innerHTML = '<li class="my-keyword-item" style="justify-content:center; color:#adb5bd;">ë“±ë¡ëœ í‚¤ì›Œë“œê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
                        listArea.style.display = 'block';
                    }
                } else {
                    // ë°ì´í„°ê°€ ìˆì„ ë•Œ -> ë¦¬ìŠ¤íŠ¸ ë§Œë“¤ê³  ë¬´ì¡°ê±´ í¼ì¹˜ê¸°
                    data.forEach(item => {
                        const li = document.createElement('li');
                        li.className = 'my-keyword-item';
                        li.id = `keyword-item-${item.id}`;
                        li.innerHTML = `
                            <span>${item.keyword}</span>
                            <button onclick="deleteKeyword(${item.id})" class="btn-delete-keyword">ì‚­ì œ</button>`;
                        listArea.appendChild(li);
                    });
                    listArea.style.display = 'block'; 
                }

            } catch (err) {
                console.error(err);
                if (!autoCheck) openCustomAlert("ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆì–´ìš”.");
            } finally {
                // [ìˆ˜ì •] ë²„íŠ¼ ìƒíƒœ ë³µêµ¬ (ìë™ ëª¨ë“œê°€ ì•„ë‹ ë•Œë§Œ)
                if (!autoCheck) {
                    btn.innerText = originalText;
                    btn.disabled = false;
                }
            }
        }

        // [ìˆ˜ì •] "window."ì„ ë¶™ì—¬ì„œ ë¸Œë¼ìš°ì € ì „ì²´ê°€ ê¸°ì–µí•˜ê²Œ ë§Œë“­ë‹ˆë‹¤ (ì ˆëŒ€ ì•ˆ ê¹Œë¨¹ìŒ)
        window.targetDeleteId = null;

        // 1. ì‚­ì œ ë²„íŠ¼ í´ë¦­ (IDë¥¼ windowì— ë¬¸ì‹ ì²˜ëŸ¼ ìƒˆê²¨ë‘ )
        function deleteKeyword(id) {
            console.log("ì‚­ì œ ìš”ì²­ ë“¤ì–´ì˜¨ ID:", id); // F12 ì½˜ì†” í™•ì¸ìš©
            window.targetDeleteId = id;

            const modal = document.getElementById('keywordDeleteModal');
            modal.style.display = 'flex';
            history.pushState({ view: 'deleteConfirm' }, '', '');
        }

        function closeKeywordDeleteModal() {
          // í™”ë©´ì— ë–  ìˆì„ ë•Œë§Œ ë’¤ë¡œê°€ê¸° ì‹¤í–‰
          // (ì´ë ‡ê²Œ í•´ì•¼ window.onpopstateê°€ ì‘ë™í•´ì„œ íŒì—…ì„ ë‹«ê³  ì´ì „ ìƒíƒœë¡œ ëŒì•„ê°‘ë‹ˆë‹¤)
          if (document.getElementById('keywordDeleteModal').style.display === 'flex') {
               history.back();
          }
     }

        // [ìˆ˜ì •] ì§„ì§œ ì‚­ì œ ì‹¤í–‰ (í™”ë©´ ì¦‰ì‹œ ë°˜ì˜)
        async function realDeleteKeyword() {
            // íŒì—… ë‹«ê¸°
            closeKeywordDeleteModal();

            // windowì— ì €ì¥í•´ë‘” ID ê°€ì ¸ì˜¤ê¸°
            const idToDelete = window.targetDeleteId;

            if (!idToDelete) return;

            try {
                // 1. ì„œë²„(Supabase)ì—ì„œ ì‚­ì œ
                const { error } = await client
                    .from('keyword_alerts')
                    .delete()
                    .eq('id', idToDelete);

                if (error) throw error;

                // 2. [í•µì‹¬] í™”ë©´(HTML)ì—ì„œ í•´ë‹¹ ì¤„ ì¦‰ì‹œ ì œê±°
                // ì•„ê¹Œ ë¶™ì—¬ë‘” ì´ë¦„í‘œ(ID)ë¥¼ ì°¾ì•„ì„œ ì§€ì›ë‹ˆë‹¤.
                const itemToRemove = document.getElementById(`keyword-item-${idToDelete}`);
                if (itemToRemove) {
                    itemToRemove.remove();
                }

                // 3. ë§Œì•½ ë‹¤ ì§€ì›Œì„œ ëª©ë¡ì´ í…… ë¹„ì—ˆìœ¼ë©´ 'ì—†ìŠµë‹ˆë‹¤' ë©”ì‹œì§€ ë„ìš°ê¸°
                const listArea = document.getElementById('my-keyword-list');
                if (listArea.children.length === 0) {
                    listArea.innerHTML = '<li class="my-keyword-item" style="justify-content:center; color:#adb5bd;">ë“±ë¡ëœ í‚¤ì›Œë“œê°€ ì—†ìŠµë‹ˆë‹¤.</li>';
                }

                // ID ì´ˆê¸°í™”
                window.targetDeleteId = null;

            } catch (err) {
                console.error("ì‚­ì œ ì—ëŸ¬:", err);
                openCustomAlert("ì‚­ì œ ì‹¤íŒ¨");
            }
        }

        let events = [];

        async function fetchEvents() {
            titleEl.innerText = "ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...";

            const { data, error } = await client.from('events').select('*');

            if (error) {
                console.error('Error:', error);
                titleEl.innerText = "ë¡œë”© ì‹¤íŒ¨ (ì½˜ì†” í™•ì¸)";
                alert("Supabase ì—°ê²° ì˜¤ë¥˜: í‚¤ ì„¤ì •ì„ í™•ì¸í•˜ì„¸ìš”.");
                return;
            }

            events = data;

            events.sort((a, b) => {
                const getTime = (str) => {
                    const match = str.match(/\d{2}:\d{2}/);
                    return match ? match[0] : '99:99';
                };

                const timeA = getTime(a.date);
                const timeB = getTime(b.date);

                if (timeA < timeB) return -1;
                if (timeA > timeB) return 1;

                if (a.title < b.title) return -1;
                if (a.title > b.title) return 1;

                return 0;
            });

            console.log("Supabase ë°ì´í„°:", events);

            renderEvents();
            markPastDays();

            showPage(0);
        }
        // â–¼â–¼â–¼ [ì¶”ê°€] í‚¤ì›Œë“œ ì•Œë¦¼ ê´€ë ¨ ë¡œì§ â–¼â–¼â–¼

        const keywordModal = document.getElementById('keywordModal');

        // [ìˆ˜ì •ëœ ë²„ì „] íŒì—… ì¦‰ì‹œ ì—´ë¦¼ + ì¤‘ë³µ ë¡œì§ ì œê±°
        async function openKeywordModal() {
            try {
                // 1. í˜„ì¬ ê¶Œí•œ ìƒíƒœ í™•ì¸ (ì´ê±´ ê¸ˆë°© ë©ë‹ˆë‹¤)
                let permission = Notification.permission;

                // A. ì°¨ë‹¨ë¨
                if (permission === 'denied') {
                    alert("ì•Œë¦¼ ê¶Œí•œì´ ì°¨ë‹¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\níœ´ëŒ€í° ì„¤ì • > ì• í”Œë¦¬ì¼€ì´ì…˜ > ì‡¼ì½• > ì•Œë¦¼ì—ì„œ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.");
                    return;
                }

                // B. ì•„ì§ ê²°ì • ì•ˆ í•¨ -> ê¶Œí•œ ìš”ì²­
                if (permission === 'default') {
                    permission = await Notification.requestPermission();
                }

                // C. í—ˆìš©ë¨ (ë˜ëŠ” ë°©ê¸ˆ í—ˆìš©í•¨)
                if (permission === 'granted') {
                    
                    // â–¼â–¼â–¼ [í•µì‹¬ ìˆ˜ì •] í† í° ê¸°ë‹¤ë¦¬ì§€ ë§ê³ , íŒì—…ë¶€í„° ì¦‰ì‹œ ì—½ë‹ˆë‹¤! â–¼â–¼â–¼
                    const keywordModal = document.getElementById('keywordModal');
                    keywordModal.style.display = 'flex';
                    document.body.classList.add('no-scroll');
                    history.pushState({ view: 'keyword' }, '', '');

                    // â–¼â–¼â–¼ [ìˆ˜ì •] ë°ì´í„° ë¡œë”© ì‹œì‘ (í† í°ì€ ì´ í•¨ìˆ˜ ì•ˆì—ì„œ ì•Œì•„ì„œ ê°€ì ¸ì˜µë‹ˆë‹¤) â–¼â–¼â–¼
                    // ì—¬ê¸°ì„œ awaitë¥¼ ì“°ì§€ ì•Šì•„ì•¼ íŒì—…ì´ ë©ˆì¶”ì§€ ì•Šê³ , ë¡œë”©ë°”ê°€ ëŒì•„ê°‘ë‹ˆë‹¤.
                    viewMyKeywords(true, true); 

                    // (ì‚­ì œë¨: ì—¬ê¸°ì„œ getTokenì„ ë˜ í˜¸ì¶œí•˜ë˜ ëŠë¦° ì½”ë“œë¥¼ ì‚­ì œí–ˆìŠµë‹ˆë‹¤)
                    
                } else {
                    alert("ì•Œë¦¼ ê¶Œí•œì„ í—ˆìš©í•´ì•¼ í‚¤ì›Œë“œ ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”!");
                }

            } catch (error) {
                console.error("ì˜¤ë¥˜:", error);
                // íŒì—…ì´ ì•ˆ ë–´ì„ ê²½ìš°ì—ë§Œ ì•Œë¦¼
                if (document.getElementById('keywordModal').style.display === 'none') {
                     alert("ì•Œë¦¼ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                }
            }
        }

        // [ì¶”ê°€] ì¡°ê±´ ì„¤ì • ëª¨ë‹¬ ì—´ê¸°
        function openConditionModal() {
            const modal = document.getElementById('conditionModal');
            modal.style.display = 'flex';
            document.body.classList.add('no-scroll'); // ë’·ë°°ê²½ ìŠ¤í¬ë¡¤ ë§‰ê¸°
            history.pushState({ view: 'condition' }, '', '');
        }

        // [ì¶”ê°€] ì¡°ê±´ ì„¤ì • ëª¨ë‹¬ ë‹«ê¸°
        function closeConditionModal(e) {
            // ë°°ê²½ì„ í´ë¦­í–ˆê±°ë‚˜ ë‹«ê¸° ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œë§Œ ë‹«í˜
            if (e && e.target !== e.currentTarget && e.target.tagName !== 'BUTTON') return;
    
            const modal = document.getElementById('conditionModal');
            modal.style.display = 'none';
            document.body.classList.remove('no-scroll');
            history.back();
        }
        
        function applyAndClose() {
            applyFilter();          // 1. í•„í„°ë¥¼ ì ìš©í•˜ê³ 
            closeConditionModal();  // 2. ì°½ì„ ë‹«ëŠ”ë‹¤
        }

        function closeKeywordModal(e) {
            keywordModal.style.display = 'none';
            document.body.classList.remove('no-scroll');
            history.back();
        }

        const regionChks = document.querySelectorAll('.region-chk');
        const genreChks = document.querySelectorAll('.genre-chk');
        const btnReset = document.getElementById('btn-reset');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const titleEl = document.getElementById('calendar-title');

        const pages = document.querySelectorAll('.calendar-page');
        let currentIndex = 0;
        const totalPages = pages.length;

        const modal = document.getElementById('eventModal');
        const confirmModal = document.getElementById('confirmModal');
        const modalPoster = document.getElementById('modalPoster');
        const noPosterText = document.getElementById('noPosterText');
        const modalTitle = document.getElementById('modalTitle');
        const modalInfo = document.getElementById('modalInfo');
        const modalTicketing = document.getElementById('modalTicketing');
        const btnGroup = document.getElementById('btnGroup');

        let currentEventData = {};
        let isModalOpen = false;

        function renderEvents() {
            document.querySelectorAll('.event-box').forEach(el => el.remove());
            document.querySelectorAll('td').forEach(td => {
                td.classList.remove('has-event');
                td.classList.add('no-event');
            });

            events.forEach(evt => {
                const nums = evt.date.match(/\d+/g);
                if (!nums || nums.length < 2) return;

                const month = parseInt(nums[0], 10);
                const day = parseInt(nums[1], 10);
                const pageIndex = month - 1;
                const targetPage = document.getElementById(`page-${pageIndex}`);
                if (!targetPage) return;

                const dateSpans = targetPage.querySelectorAll('.date-num');
                let targetTd = null;
                for (let span of dateSpans) {
                    if (parseInt(span.innerText, 10) === day) {
                        targetTd = span.parentElement;
                        break;
                    }
                }

                if (targetTd) {
                    const div = document.createElement('div');
                    div.className = 'event-box';

                    let regionGroup = 'ê·¸ ì™¸';
                    if (evt.region === 'ì„œìš¸') regionGroup = 'ì„œìš¸';
                    else if (evt.region === 'ê²½ê¸°' || evt.region === 'ì¸ì²œ') regionGroup = 'ê²½ê¸°';

                    div.dataset.regionGroup = regionGroup;
                    div.dataset.region = evt.region;
                    div.dataset.genre = evt.genre;
                    div.dataset.title = evt.title;
                    div.dataset.date = evt.date;
                    div.dataset.place = evt.place;
                    div.dataset.poster = evt.poster;
                    div.dataset.link1 = evt.link1 || '';
                    div.dataset.link2 = evt.link2 || '';
                    div.dataset.link3 = evt.link3 || '';
                    div.dataset.link4 = evt.link4 || '';
                    div.dataset.link5 = evt.link5 || '';
                    div.dataset.youtube = evt['youtube search'] || '';

                    div.onclick = function () { openModal(this); };

                    const timeStr = evt.date.split(' ')[1] || '';
                    let rClass = 'txt-blue';
                    if (['ì„œìš¸', 'ê²½ê¸°', 'ì¸ì²œ'].includes(evt.region)) rClass = 'txt-red';
                    const rText = `(${evt.region})`;

                    let posterHtml = '';
                    if (evt.poster && evt.poster.trim() !== '') {
                        // [ìˆ˜ì • í›„] (ë³µì‚¬í•´ì„œ ë®ì–´ì“°ì„¸ìš”)
                        // srcì—ëŠ” ë¹ˆ ì´ë¯¸ì§€ë¥¼ ë„£ê³ , ì§„ì§œ ì£¼ì†ŒëŠ” data-srcì— ë„£ìŠµë‹ˆë‹¤.
                        posterHtml = `<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="${evt.poster}" class="event-poster-thumb lazy-img" alt="${evt.title}" decoding="async" oncontextmenu="return false;">`;
                    }

                    const htmlContent = `
                        ${posterHtml}
                        <div class="event-header">
                            <div><span style="color:#212529; font-weight:800;">${timeStr}</span></div>
                            <div><span class="${rClass}">${rText}</span></div>
                        </div>
                        <span class="box-line2"><span style="color:#495057; font-weight:700; font-size: 18px;">${evt.title}</span></span>
                    `;
                    div.innerHTML = htmlContent;

                    targetTd.appendChild(div);
                    targetTd.classList.add('has-event');
                    targetTd.classList.remove('no-event');
                }
            });
            applyFilter();

            // [renderEvents í•¨ìˆ˜ ë‚´ë¶€ì˜ ë§¨ ëë¶€ë¶„ì— ì¶”ê°€]

            // 1. ì´ë¯¸ì§€ ë¡œë”© ê´€ì°°ì ì„¤ì • (ë¯¸ë¦¬ ë¡œë”© ê¸°ìˆ )
            const imgObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    // í™”ë©´ì— ë³´ì´ê¸° 800px ì „ë¶€í„° ë¡œë”© ì‹œì‘!
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        // ìˆ¨ê²¨ë‘” ì§„ì§œ ì£¼ì†Œ(data-src)ë¥¼ srcë¡œ ì˜®ê¹€
                        if (img.dataset.src) {
                            img.src = img.dataset.src;
                            img.removeAttribute('data-src'); // ì²˜ë¦¬ í›„ ê¼¬ë¦¬í‘œ ë–¼ê¸°
                        }
                        observer.unobserve(img); // í•œ ë²ˆ ë¡œë”©í–ˆìœ¼ë©´ ê°ì‹œ ë
                    }
                });
            }, {
                root: null,
                rootMargin: '1500px 0px', // â˜…í•µì‹¬â˜…: í™”ë©´ ì•„ë˜ 800pxê¹Œì§€ ë¯¸ë¦¬ ê°ì§€í•´ë¼! (ì´ ìˆ«ìë¥¼ ëŠ˜ë¦¬ë©´ ë” ë¹¨ë¦¬ ë¡œë”©í•¨)
                threshold: 0
            });

            // 2. ëª¨ë“  ì´ë¯¸ì§€ì—ê²Œ ê´€ì°°ì ë¶™ì´ê¸°
            const lazyImages = document.querySelectorAll('img.lazy-img');
            lazyImages.forEach(img => {
                imgObserver.observe(img);
            });

        }

          // [ìˆ˜ì •] ê³µì—° ìƒì„¸ íŒì—… ì—´ê¸°
        function openModal(element) {
             const ds = element.dataset;
             currentEventData = {
                  title: ds.title,
                  date: ds.date,
                  place: ds.place
             };

             modalTitle.innerText = ds.title;
             modalInfo.innerText = ds.place;
             modalTicketing.innerText = `ì˜ˆë§¤ì¼ì • : ${ds.date}`;

             if (ds.poster && ds.poster.trim() !== '') {
                  modalPoster.src = ds.poster;
                  modalPoster.style.display = 'block';
                  noPosterText.style.display = 'none';
                  modalPoster.onclick = function () {
                       openZoomOverlay(ds.poster);
                  };
             } else {
                  modalPoster.style.display = 'none';
                  noPosterText.style.display = 'block';
                  modalPoster.onclick = null;
             }

             let htmlContent = '';
             const links = [];
          
             if (ds.link1) links.push({ name: 'NOL í‹°ì¼“', url: ds.link1, color: '#4154FF' });
             if (ds.link2) links.push({ name: 'yes24 í‹°ì¼“', url: ds.link2, color: '#FF3804' });
             if (ds.link3) links.push({ name: 'ë©œë¡  í‹°ì¼“', url: ds.link3, color: '#00CD3C' });
             if (ds.link4) links.push({ name: 'í‹°ì¼“ë§í¬', url: ds.link4, color: '#e03131' });
             if (ds.link5) links.push({ name: 'ì˜ˆë§¤ì²˜', url: ds.link5, color: '#e03131' });

             if (links.length > 0) {
                  htmlContent += `<div class="btn-row">`;
                  links.forEach(link => {
                       htmlContent += `<a href="${link.url}" target="_blank" class="modal-btn" 
                            style="background-color: #ffffff; color: ${link.color}; border: 1px solid ${link.color}; flex: 1;"
                            oncontextmenu="return false" 
                            draggable="false" ondragstart="return false;">${link.name}</a>`;
                  });
                  htmlContent += `</div>`;
             }

             htmlContent += `<div class="btn-row">`;
             htmlContent += `<button onclick="openConfirmModal()" class="modal-btn btn-action-red" oncontextmenu="return false">ì˜ˆë§¤ì¼ì • ì¶”ê°€</button>`;

             if (ds.youtube && ds.youtube.trim() !== '') {
                  const ytUrl = `https://www.youtube.com/results?search_query=${encodeURIComponent(ds.youtube)}`;
                  htmlContent += `
                       <a href="${ytUrl}" target="_blank" class="modal-btn btn-youtube-custom"
                            oncontextmenu="return false" 
                            draggable="false" ondragstart="return false;">
                            <img src="yt.png" alt="Youtube" class="yt-icon" draggable="false" ondragstart="return false;">
                            ìœ íŠœë¸Œ ê²€ìƒ‰
                       </a>`;
             }
             htmlContent += `</div>`;

             btnGroup.innerHTML = htmlContent;

             modal.style.display = 'flex';
             document.body.classList.add('no-scroll');

             // â–¼â–¼â–¼ [í•µì‹¬ ìˆ˜ì •] ê³µì—° íŒì—… ìƒíƒœ ê¸°ë¡ (URLì— #modal ì•ˆ ë¶™ê²Œ ê¹”ë”í•˜ê²Œ ì²˜ë¦¬)
             history.pushState({ view: 'modal' }, '', '');
        }

              // [ìˆ˜ì •] ì˜ˆë§¤ì¼ì • ì¶”ê°€(ICS) íŒì—… ì—´ê¸°
        function openConfirmModal() {
             const confirmModal = document.getElementById('confirmModal');
             confirmModal.style.display = 'flex';
          
             // â–¼â–¼â–¼ [í•µì‹¬ ìˆ˜ì •] ICS íŒì—… ìƒíƒœ ê¸°ë¡ (ì´ê²Œ ìˆì–´ì•¼ ë’¤ë¡œê°€ê¸° ì‹œ ì´ íŒì—…ë§Œ ë‹«í˜)
             history.pushState({ view: 'confirm' }, '', '');
        }

        function closeConfirmModal() {
            if (confirmModal.style.display === 'flex') {
                history.back();
            }
        }

        function closeModal(e) {
            if (modal.style.display === 'flex') {
                history.back();
            }
        }

        function openZoomOverlay(imgSrc) {
            const overlay = document.getElementById('imageZoomOverlay');
            const zoomedImg = document.getElementById('zoomedImage');
            zoomedImg.src = imgSrc;
            overlay.style.display = 'block';
            document.body.classList.remove('no-scroll');
            const viewport = document.getElementById('viewport-meta');
            if (viewport) viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes');
        }

        function closeZoomOverlay() {
            const overlay = document.getElementById('imageZoomOverlay');
            overlay.style.display = 'none';
            if (modal.style.display === 'flex') document.body.classList.add('no-scroll');
            const viewport = document.getElementById('viewport-meta');
            if (viewport) viewport.setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
        }

        function realDownload() {
            history.back();
            const title = (currentEventData.title || "ê³µì—° ê´€ëŒ") + " ì˜ˆë§¤";
            const rawDate = currentEventData.date;
            const nums = rawDate.match(/\d+/g);

            let year = 2026; let month = '01'; let day = '01'; let hour = '12'; let min = '00';

            if (nums) {
                if (nums[0].length === 4) {
                    year = nums[0]; month = nums[1]; day = nums[2];
                    if (nums.length >= 5) { hour = nums[3]; min = nums[4]; }
                } else {
                    month = nums[0]; day = nums[1];
                    if (nums.length >= 4) { hour = nums[2]; min = nums[3]; }
                }
            }

            const pad = (n) => n.toString().padStart(2, '0');
            const startStr = `${year}${pad(month)}${pad(day)}T${pad(hour)}${pad(min)}00`;
            const endStr = `${year}${pad(month)}${pad(day)}T${pad(parseInt(hour) + 2)}${pad(min)}00`;

            const icsContent =
                `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Show Calendar//KR
BEGIN:VEVENT
SUMMARY:${title}
DTSTART:${startStr}
DTEND:${endStr}
END:VEVENT
END:VCALENDAR`;

            const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });
            const linkElem = document.createElement('a');
            linkElem.href = window.URL.createObjectURL(blob);
            linkElem.setAttribute('download', `${title}.ics`);
            document.body.appendChild(linkElem);
            linkElem.click();
            document.body.removeChild(linkElem);
        }

        function showPage(index) {
            pages.forEach((page, idx) => {
                if (idx === index) {
                    page.style.display = 'block';
                    titleEl.innerText = page.dataset.title;
                    // í•˜ë‹¨ ì—°ë„/ì›” í…ìŠ¤íŠ¸ ë™ê¸°í™”
                    document.getElementById('calendar-title-bottom').innerText = page.dataset.title;
                } else {
                    page.style.display = 'none';
                }
            });

            // [ìƒë‹¨] ë²„íŠ¼ ìƒíƒœ ì œì–´
            if (index === 0) prevBtn.classList.add('disabled');
            else prevBtn.classList.remove('disabled');

            if (index === totalPages - 1) nextBtn.classList.add('disabled');
            else nextBtn.classList.remove('disabled');

            // â–¼â–¼â–¼ [ì¶”ê°€] í•˜ë‹¨ ë²„íŠ¼ë„ ìƒë‹¨ê³¼ ë˜‘ê°™ì´ ë¹„í™œì„±í™” ì²˜ë¦¬ â–¼â–¼â–¼
            const prevBtnBottom = document.getElementById('prev-btn-bottom');
            const nextBtnBottom = document.getElementById('next-btn-bottom');

            if (index === 0) prevBtnBottom.classList.add('disabled');
            else prevBtnBottom.classList.remove('disabled');

            if (index === totalPages - 1) nextBtnBottom.classList.add('disabled');
            else nextBtnBottom.classList.remove('disabled');

            applyFilter();
        }

        function applyFilter() {
            const selectedRegions = Array.from(regionChks).filter(c => c.checked).map(c => c.value);
            const selectedGenres = Array.from(genreChks).filter(c => c.checked).map(c => c.value);

            const visiblePage = pages[currentIndex];
            const tds = visiblePage.querySelectorAll('td');

            // 1. ëª¨ë“  í•„í„°ê°€ êº¼ì ¸ìˆì„ ë•Œ ì²˜ë¦¬
            if (selectedRegions.length === 0) {
                document.body.classList.add('initial-mode');
                visiblePage.querySelectorAll('.event-box').forEach(el => el.style.display = 'none');
                tds.forEach(td => {
                    td.classList.remove('day-active');
                    td.classList.add('day-inactive');
                });

                // [ì¤‘ìš”] í•„í„° ë‹¤ êº¼ì¡Œìœ¼ë‹ˆ ë²„íŠ¼ë„ ìˆ¨ê¹€ ì²´í¬
                checkTodayButtonVisibility();
                return;
            } else {
                document.body.classList.remove('initial-mode');
            }

            // 2. í•„í„°ë§ ë¡œì§
            tds.forEach(td => {
                const boxes = td.querySelectorAll('.event-box');
                let hasVisible = false;

                boxes.forEach(box => {
                    if (selectedRegions.includes(box.dataset.regionGroup) && selectedGenres.includes(box.dataset.genre)) {
                        box.style.display = 'block';
                        hasVisible = true;
                    } else {
                        box.style.display = 'none';
                    }
                });

                if (hasVisible) {
                    td.classList.add('day-active');
                    td.classList.remove('day-inactive');
                } else {
                    td.classList.remove('day-active');
                    td.classList.add('day-inactive');
                }
            });

            // [ì¤‘ìš”] í•„í„° ì ìš©ì´ ëë‚œ í›„, ë²„íŠ¼ í‘œì‹œ ì—¬ë¶€ë¥¼ ê²°ì •í•´ì•¼ ì •í™•í•¨
            checkTodayButtonVisibility();
        }

        prevBtn.addEventListener('click', () => {
            if (currentIndex > 0) {
                currentIndex--;
                showPage(currentIndex);
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentIndex < totalPages - 1) {
                currentIndex++;
                showPage(currentIndex);
            }
        });

        let isAllChecked = true;
        // [ìˆ˜ì •] ì¡°ê±´ íŒì—…(í–„ë²„ê±°)ì˜ 'ëª¨ë‘í•´ì œ' ë²„íŠ¼ ë¡œì§
        btnReset.addEventListener('click', () => {
             // 1. í˜„ì¬ í™”ë©´ì— ìˆëŠ” ì¥ë¥´ ì²´í¬ë°•ìŠ¤ ì¤‘ 'ë¹„í™œì„±í™”(disabled)' ëœ ê±´ ëºë‹ˆë‹¤.
             const activeChks = document.querySelectorAll('.genre-chk:not(:disabled)');
          
             // 2. í™œì„±í™”ëœ ì• ë“¤ì´ ì „ë¶€ ì²´í¬ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
             // (Array.fromì„ ì¨ì„œ ë°°ì—´ë¡œ ë§Œë“  ë’¤ every í•¨ìˆ˜ ì‚¬ìš©)
             const isAllChecked = Array.from(activeChks).every(c => c.checked);

             if (isAllChecked) {
                  // ì „ë¶€ ì¼œì ¸ ìˆìœ¼ë©´ -> ëˆë‹¤
                  activeChks.forEach(chk => chk.checked = false);
                  btnReset.innerText = "ëª¨ë‘ì„ íƒ";
             } else {
                  // í•˜ë‚˜ë¼ë„ êº¼ì ¸ ìˆìœ¼ë©´ -> ì¼ ë‹¤
                  activeChks.forEach(chk => chk.checked = true);
                  btnReset.innerText = "ëª¨ë‘í•´ì œ";
             }
        });

        // regionChks.forEach(chk => chk.addEventListener('change', applyFilter));
        // genreChks.forEach(chk => chk.addEventListener('change', applyFilter));

        regionChks.forEach(c => c.checked = false);
        genreChks.forEach(c => c.checked = true);
        isAllChecked = true;
        btnReset.innerText = "ëª¨ë‘í•´ì œ";

        fetchEvents();
        // [ì¶”ê°€] ë§¨ ìœ„ë¡œ ë¶€ë“œëŸ½ê²Œ ì´ë™í•˜ëŠ” í•¨ìˆ˜
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: "smooth"
            });
        }
        /* â–¼ [ì¶”ê°€] ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦° íƒ€ì´ë¨¸ ì„¤ì • */
        /* window.onload = function() {
             /*const splash = document.getElementById('splash-screen'); 
        
             // 1500ms (1.5ì´ˆ) ë’¤ì— ì‚¬ë¼ì§€ê²Œ ì„¤ì • (ì›í•˜ëŠ” ì‹œê°„ìœ¼ë¡œ ìˆ«ì ë³€ê²½ ê°€ëŠ¥)
             setTimeout(() => {
                 splash.classList.add('hidden');
             }, 1500); */
        // [ì¶”ê°€] ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ ê°ì§€ (ë²„íŠ¼ ë³´ì´ê¸°/ìˆ¨ê¸°ê¸°)
        const topBtn = document.getElementById("btn-back-to-top");

        window.onscroll = function () {
            // ìŠ¤í¬ë¡¤ì„ 200px ì´ìƒ ë‚´ë ¸ì„ ë•Œë§Œ ë²„íŠ¼ì„ ë³´ì—¬ì¤Œ
            if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
                topBtn.style.display = "flex";
            } else {
                topBtn.style.display = "none";
            }
        };

        // â–¼â–¼â–¼ [ì¶”ê°€] í•˜ë‹¨ ë²„íŠ¼ í´ë¦­ ì‹œ ìƒë‹¨ ë²„íŠ¼ ë™ì‘ ì‹¤í–‰ â–¼â–¼â–¼
        document.getElementById('prev-btn-bottom').addEventListener('click', () => {
            document.getElementById('prev-btn').click();
        });

        document.getElementById('next-btn-bottom').addEventListener('click', () => {
            document.getElementById('next-btn').click();
        });

        // ==========================================
        // [ì¶”ê°€ ê¸°ëŠ¥] ì˜¤ëŠ˜ ë‚ ì§œ ì´ë™ & ë²„íŠ¼ ì œì–´ ë¡œì§
        // ==========================================

        const btnGoToday = document.getElementById('btn-go-today');

        // 1. ë²„íŠ¼ ë³´ì´ê¸°/ìˆ¨ê¸°ê¸° ê²°ì • í•¨ìˆ˜ (ìˆ˜ì •ë¨)
        function checkTodayButtonVisibility() {
            const visiblePage = pages[currentIndex]; // í˜„ì¬ ë³´ì´ëŠ” í˜ì´ì§€ ê°€ì ¸ì˜¤ê¸°
            const pageTitle = visiblePage.dataset.title; // ì˜ˆ: "2026ë…„ 1ì›”"

            // [ì¡°ê±´ 1] ë‚ ì§œ í™•ì¸: ì´ë²ˆ ë‹¬ì´ ë§ëŠ”ê°€?
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const realTodayTitle = `${year}ë…„ ${month}ì›”`;

            if (pageTitle !== realTodayTitle) {
                // ì´ë²ˆ ë‹¬ì´ ì•„ë‹ˆë©´ ë¬´ì¡°ê±´ ìˆ¨ê¹€
                btnGoToday.style.display = 'none';
                return;
            }

            // [ì¡°ê±´ 2] ê³µì—° í™•ì¸: í™œì„±í™”ëœ(ê³µì—° ìˆëŠ”) ë‚ ì§œê°€ í•˜ë‚˜ë¼ë„ ìˆëŠ”ê°€?
            // applyFilterê°€ ì‹¤í–‰ëœ í›„, ê³µì—°ì´ ìˆëŠ” ë‚ ì€ 'day-active' í´ë˜ìŠ¤ë¥¼ ê°€ì§‘ë‹ˆë‹¤.
            const hasActiveEvents = visiblePage.querySelector('td.day-active') !== null;

            if (hasActiveEvents) {
                btnGoToday.style.display = 'flex'; // ì¡°ê±´ ë§Œì¡± ì‹œ ë³´ì„
            } else {
                btnGoToday.style.display = 'none'; // ê³µì—° ì—†ìœ¼ë©´ ìˆ¨ê¹€
            }
        }
        // [ì¶”ê°€] ê³¼ê±° ë‚ ì§œ íë¦¬ê²Œ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜
        // [ìˆ˜ì •] ê³¼ê±° ë‚ ì§œ ì²˜ë¦¬ í•¨ìˆ˜
        function markPastDays() {
            const now = new Date();
            // ì‹œê°„ì€ ë¬´ì‹œí•˜ê³  'ë‚ ì§œ'ë§Œ ë¹„êµí•˜ê¸° ìœ„í•´ 0ì‹œ 0ë¶„ìœ¼ë¡œ ì„¤ì •
            const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate());

            pages.forEach(page => {
                const title = page.dataset.title;
                const matches = title.match(/(\d+)ë…„ (\d+)ì›”/);
                if (!matches) return;

                const year = parseInt(matches[1], 10);
                const month = parseInt(matches[2], 10) - 1;

                const dateSpans = page.querySelectorAll('.date-num');
                dateSpans.forEach(span => {
                    const day = parseInt(span.innerText, 10);
                    if (isNaN(day)) return;

                    const cellDate = new Date(year, month, day);

                    // ì˜¤ëŠ˜ë³´ë‹¤ ë‚ ì§œê°€ ì‘ìœ¼ë©´(ê³¼ê±°ì´ë©´)
                    if (cellDate < todayStart) {
                        const td = span.closest('td');
                        if (td) {
                            td.classList.add('day-past'); // ë””ìì¸ìš© í´ë˜ìŠ¤ë§Œ ì¶”ê°€

                            // [ì‚­ì œë¨] td.classList.remove('day-active'); 
                            // -> ì´ ì¤„ì„ ì§€ì› ìœ¼ë¯€ë¡œ, ë°ì´í„° ìƒìœ¼ë¡œëŠ” ì—¬ì „íˆ 'í™œì„±' ìƒíƒœì…ë‹ˆë‹¤.
                            // -> ë•ë¶„ì— CSSì—ì„œ ë””ìì¸ë§Œ ë°”ê¾¸ê³  í´ë¦­ ê¸°ëŠ¥ì€ ì‚´ì•„ìˆê²Œ ë©ë‹ˆë‹¤.
                        }
                    }
                });
            });
        }
        // 2. ë²„íŠ¼ í´ë¦­ ì‹œ ìŠ¤í¬ë¡¤ ì´ë™ í•¨ìˆ˜
        btnGoToday.addEventListener('click', () => {
            const now = new Date();
            const todayDate = now.getDate(); // ì˜¤ëŠ˜ ë‚ ì§œ (ìˆ«ì)

            // í˜„ì¬ ë³´ì´ëŠ” í˜ì´ì§€ì—ì„œ 'ì˜¤ëŠ˜ ë‚ ì§œ ìˆ«ì'ë¥¼ ê°€ì§„ ìš”ì†Œë¥¼ ì°¾ìŒ
            const visiblePage = pages[currentIndex];
            const dateSpans = visiblePage.querySelectorAll('.date-num');

            let targetElement = null;
            for (let span of dateSpans) {
                if (parseInt(span.innerText, 10) === todayDate) {
                    // ìˆ«ìë¥¼ ê°ì‹¸ê³  ìˆëŠ” ì¹¸(td)ì„ íƒ€ê²Ÿìœ¼ë¡œ ì¡ìŒ
                    targetElement = span.closest('td');
                    break;
                }
            }

            if (targetElement) {
                // ìŠ¤í‹°í‚¤ í—¤ë”ì˜ ë†’ì´ë¥¼ êµ¬í•¨ (ì´ë§Œí¼ ë¹¼ê³  ìŠ¤í¬ë¡¤í•´ì•¼ ì•ˆ ê°€ë ¤ì§)
                const headerHeight = document.getElementById('sticky-header').offsetHeight;

                // íƒ€ê²Ÿ ìš”ì†Œì˜ ì ˆëŒ€ ìœ„ì¹˜ ê³„ì‚°
                const elementPosition = targetElement.getBoundingClientRect().top + window.scrollY;

                // [ê³„ì‚°] ìš”ì†Œ ìœ„ì¹˜ - í—¤ë” ë†’ì´ = í—¤ë” ë°”ë¡œ ì•„ë˜ì— ë”± ë¶™ìŒ
                // (ì‚´ì§ ì—¬ìœ ë¥¼ ì£¼ê³  ì‹¶ë‹¤ë©´ -10 ì •ë„ ë” ë¹¼ë„ ë¨)
                const offsetPosition = elementPosition - headerHeight;

                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth' // ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤
                });

                // (ì„ íƒì‚¬í•­) ê¹œë¹¡ì„ íš¨ê³¼ë¡œ ìœ„ì¹˜ ì•Œë ¤ì£¼ê¸°
                targetElement.style.transition = 'background-color 0.5s';
                targetElement.style.backgroundColor = '#fff9db'; // ì—°í•œ ë…¸ë€ìƒ‰
                setTimeout(() => {
                    targetElement.style.backgroundColor = ''; // ì›ë˜ëŒ€ë¡œ ë³µêµ¬
                }, 1000);
            } else {
                alert("ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            }
        });
        // â–¼â–¼â–¼ [ìˆ˜ì •] ê³µì§€ íŒì—… ë° ìŠ¤í¬ë¡¤ ì ê¸ˆ ë¡œì§ â–¼â–¼â–¼

        // í˜ì´ì§€ê°€ ë¡œë”©ë˜ìë§ˆì ìŠ¤í¬ë¡¤ ì ê·¸ê¸° (íŒì—…ì´ ë–  ìˆìœ¼ë‹ˆê¹Œ)
        document.body.classList.add('no-scroll');

        // 1. íŒì—… ë‹«ê¸° í•¨ìˆ˜
        function closeMainNotice() {
            const modal = document.getElementById('mainNoticeModal');
            modal.style.display = 'none';

            // íŒì—… ë‹«ì„ ë•Œ ìŠ¤í¬ë¡¤ ì ê¸ˆ í•´ì œ!
            document.body.classList.remove('no-scroll');
        }

        // 2. ì•±(PWA)ì¸ì§€ ì›¹(ë¸Œë¼ìš°ì €)ì¸ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
        function checkDisplayMode() {
            const pwaMsg = document.getElementById('pwa-msg');
            const isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true;

            if (isStandalone) {
                // ì•± ëª¨ë“œ: ì„¤ì¹˜ ê¶Œìœ  ë©”ì‹œì§€ ìˆ¨ê¹€
                console.log("ì•± ëª¨ë“œë¡œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.");
            } else {
                // ì›¹ ëª¨ë“œ: ì„¤ì¹˜ ê¶Œìœ  ë©”ì‹œì§€ ë³´ì„
                pwaMsg.style.display = 'flex';
                console.log("ë¸Œë¼ìš°ì € ëª¨ë“œë¡œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.");
            }
        }

        checkDisplayMode();
        // â–¼â–¼â–¼ [ì¶”ê°€] ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ (ì•±ìœ¼ë¡œ ë§Œë“¤ê¸° ìœ„í•œ í•„ìˆ˜ ì ˆì°¨) â–¼â–¼â–¼
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
                navigator.serviceWorker.register('/sw.js').then(function (registration) {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }, function (err) {
                    console.log('ServiceWorker registration failed: ', err);
                });
            });
        }
// [1] ì‹œì‘ ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰ë˜ëŠ” ë©”ì¸ í•¨ìˆ˜
     function startProcess() {
          // 1. ì„ íƒ ì—¬ë¶€ ê²€ì‚¬
          const checkedRegions = document.querySelectorAll('.intro-region-chk:checked');
          const checkedGenres = document.querySelectorAll('.intro-genre-chk:checked');

          if (checkedRegions.length === 0 || checkedGenres.length === 0) {
               openCustomAlert("ì§€ì—­ê³¼ ì¥ë¥´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!");
               return;
          }

          // 2. ì¸íŠ¸ë¡œ ë‹«ê³  -> ë¡œë”© í™”ë©´ìœ¼ë¡œ ë®ê¸°
          document.getElementById('introModal').style.display = 'none';
          document.getElementById('loadingOverlay').style.display = 'flex';
          
          if (Notification.permission === 'granted') {
              navigator.serviceWorker.register('/sw.js').then(reg => {
                  window.getToken(window.messaging, {
                      vapidKey: "BI7wflO-MlNm_zsb2KxNrKbszAWRxBnweRDOddyFqKvnpUvoA_cgPXKB1_IhoPymFN1Js0JOTq8CZ8__w5kqYp8",
                      serviceWorkerRegistration: reg
                  }).catch(e => console.log("ë¯¸ë¦¬ ë¡œë”© ì‹¤íŒ¨(ê´œì°®ìŒ)"));
              });
          }
          // 3. í•„í„° ì ìš© ë° ì „ì²´ ë¡œë”© ì‹œì‘
          // ë¸Œë¼ìš°ì € ë Œë”ë§ íƒ€ì´ë° í™•ë³´ë¥¼ ìœ„í•´ requestAnimationFrame ì‚¬ìš©
          requestAnimationFrame(() => {
               syncAndApplyFilters(checkedRegions, checkedGenres);
               alignCalendarPosition();
          });
     }

     // [2] í•„í„° ë™ê¸°í™” ë° ì ìš©
     function syncAndApplyFilters(regions, genres) {
          document.querySelectorAll('.region-chk').forEach(el => el.checked = false);
          document.querySelectorAll('.genre-chk').forEach(el => el.checked = false);

          regions.forEach(r => {
               const target = document.querySelector(`.region-chk[value="${r.value}"]`);
               if(target) target.checked = true;
          });
          genres.forEach(g => {
               const target = document.querySelector(`.genre-chk[value="${g.value}"]`);
               if(target) target.checked = true;
          });

          applyFilter();
     }

     // [3] ì „ì²´ ì´ë¯¸ì§€ ê°•ì œ ë¡œë”© ë° ìœ„ì¹˜ ì •ë ¬ (í•µì‹¬ ìˆ˜ì •ë¨)
     function alignCalendarPosition() {
          const visiblePage = pages[currentIndex];
          
          // [ì¤‘ìš”] 'ì˜¤ëŠ˜ ë‚ ì§œ' ì…€ë§Œ ì°¾ëŠ” ê²Œ ì•„ë‹ˆë¼, 'ì „ì²´ ì´ë¯¸ì§€'ë¥¼ ì°¾ìŠµë‹ˆë‹¤.
          // ê¸°ì¡´ì˜ Lazy Loading(ìŠ¤í¬ë¡¤í•´ì•¼ ë¡œë”©ë¨)ì„ ë¬´ì‹œí•˜ê³  ê°•ì œë¡œ ë‹¤ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
          const allImages = visiblePage.querySelectorAll('img');
          const promises = [];

          allImages.forEach(img => {
               // 1. ì•„ì§ ë¡œë”© ì•ˆ ëœ ì´ë¯¸ì§€(data-srcê°€ ìˆëŠ” ê²½ìš°) ê°•ì œ ì‹¤í–‰
               if (img.dataset.src) {
                    img.src = img.dataset.src; // ì£¼ì†Œ ì£¼ì…
                    img.removeAttribute('data-src'); // ê¼¬ë¦¬í‘œ ì œê±°
                    img.classList.remove('lazy-img'); // ë ˆì´ì§€ ë¡œë”© ëŒ€ìƒì—ì„œ ì œì™¸
               }

               // 2. ë¡œë”© ëŒ€ê¸° ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ (ì´ë¯¸ ì™„ë£Œëœ ê±´ íŒ¨ìŠ¤)
               if (!img.complete) {
                    promises.push(new Promise(resolve => {
                         img.onload = resolve;
                         img.onerror = resolve; // ì—ëŸ¬ë‚˜ë„ ë©ˆì¶”ì§€ ì•Šê²Œ
                    }));
               }
          });

          console.log(`ì´ ${promises.length}ê°œì˜ ì´ë¯¸ì§€ë¥¼ ë¡œë”© ëŒ€ê¸° ì¤‘...`);

          // [ëŒ€ê¸°] ëª¨ë“  ì´ë¯¸ì§€ê°€ ë‹¤ ëœ° ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼ (ìµœëŒ€ 5ì´ˆ ì•ˆì „ì¥ì¹˜)
          const timeout = new Promise(resolve => setTimeout(resolve, 5000));

          Promise.race([Promise.all(promises), timeout]).then(() => {
               console.log("ëª¨ë“  ì´ë¯¸ì§€ ë¡œë”© ì™„ë£Œ!");
               // ë¡œë”©ì´ ë‹¤ ëë‚¬ìœ¼ë‹ˆ ë†’ì´ê°€ í™•ì •ë¨ -> ìŠ¤í¬ë¡¤ ì´ë™ ê³„ì‚° ì‹œì‘
               calculateAndScroll();
          });
     }

     // [4] ìŠ¤í¬ë¡¤ ê³„ì‚° ë° ì´ë™ í•¨ìˆ˜ (ìˆ˜ì •ë¨)
     function calculateAndScroll() {
          const today = new Date().getDate();
          const visiblePage = pages[currentIndex];
          const dateSpans = visiblePage.querySelectorAll('.date-num');
          let targetTd = null;

          for (let span of dateSpans) {
               if (parseInt(span.innerText, 10) === today) {
                    targetTd = span.closest('td');
                    break;
               }
          }

          if (targetTd) {
               const header = document.getElementById('sticky-header');
               const headerHeight = header.getBoundingClientRect().height;
               
               const rect = targetTd.getBoundingClientRect();
               const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
               
               // íƒ€ê²Ÿ ì…€ì˜ ì ˆëŒ€ ìœ„ì¹˜
               const absoluteTop = rect.top + scrollTop;
               const absoluteBottom = rect.bottom + scrollTop;
               // í™”ë©´ ì „ì²´ ë†’ì´
               const windowHeight = window.innerHeight;

               let scrollToY = 0;

               if (targetTd.classList.contains('day-active')) {
                    // 1) ê³µì—° ìˆìŒ: Header í•˜ë‹¨ == ì˜¤ëŠ˜ ìœ„ ê²½ê³„ì„  (ê¸°ì¡´ ìœ ì§€)
                    scrollToY = absoluteTop - headerHeight;
                    console.log("ê³µì—° ìˆìŒ: ìƒë‹¨ ì •ë ¬");
               } else {
                    // 2) ê³µì—° ì—†ìŒ: í™”ë©´ ìµœí•˜ë‹¨ == ì˜¤ëŠ˜ ì•„ë˜ ê²½ê³„ì„ 
                    // (ì˜¤ëŠ˜ ë‚ ì§œê°€ í™”ë©´ ë°”ë‹¥ì— ë”± ê±¸ì¹˜ê²Œ ë¨)
                    scrollToY = absoluteBottom - windowHeight;
                    
                    // í˜¹ì‹œ ê³„ì‚°ê°’ì´ 0ë³´ë‹¤ ì‘ìœ¼ë©´ ë§¨ ìœ„ë¡œ ë³´ëƒ„ (ì•ˆì „ì¥ì¹˜)
                    if (scrollToY < 0) scrollToY = 0;
                    
                    console.log("ê³µì—° ì—†ìŒ: í™”ë©´ ìµœí•˜ë‹¨ ì •ë ¬");
               }

               // ìˆœê°„ì´ë™
               window.scrollTo({
                    top: scrollToY,
                    behavior: 'instant'
               });
          }

          finishLoading();
     }

        // [ìˆ˜ì •] ë¡œë”© ì™„ë£Œ (ê¸°ë³¸ ìƒíƒœ 1ê°œë§Œ ì„¤ì •)
        function finishLoading() {
          setTimeout(() => {
               document.getElementById('loadingOverlay').style.display = 'none';
               
               const noticeModal = document.getElementById('mainNoticeModal');
               noticeModal.style.display = 'flex';
               
               document.body.classList.add('no-scroll');

               // 1. ë°”ë‹¥ì— 'ìº˜ë¦°ë”' ìƒíƒœ ê¹”ê¸°
               history.pushState({ page: 'calendar' }, '', '');
               
               // 2. ê·¸ ìœ„ì— 'ê³µì§€ íŒì—…' ìƒíƒœ ìŒ“ê¸°
               // (ì´ë ‡ê²Œ í•´ì•¼ ë’¤ë¡œê°€ê¸° ëˆ„ë¥´ë©´ 2ë²ˆì´ ë¹ ì§€ë©´ì„œ 1ë²ˆ(ìº˜ë¦°ë”)ìœ¼ë¡œ ê°€ê³ , íŒì—…ì´ ë‹«í˜)
               history.pushState({ view: 'notice' }, '', '');
          }, 100);
     }

     window.onpopstate = function(event) {
          // 0. ëª¨ë“  íŒì—… ìš”ì†Œ ë³€ìˆ˜í™”
          const exitModal = document.getElementById('exitConfirmModal');
          const alertModal = document.getElementById('customAlertModal');
          const eventModal = document.getElementById('eventModal');
          const confirmModal = document.getElementById('confirmModal');
          const noticeModal = document.getElementById('mainNoticeModal');
          
          const conditionModal = document.getElementById('conditionModal');
          const keywordModal = document.getElementById('keywordModal');
          const keywordDeleteModal = document.getElementById('keywordDeleteModal');

          // 2. [í‚¤ì›Œë“œ ê´€ë¦¬ì°½] ìƒíƒœë¡œ ëŒì•„ì™”ì„ ë•Œ (â˜…í•µì‹¬ ì¶”ê°€ë¨â˜…)
          // (í‚¤ì›Œë“œ ì°½ ìœ„ì— ëœ¬ 'ì•Œë¦¼ì°½'ì´ë‚˜ 'ì‚­ì œ í™•ì¸ì°½'ì„ ë‹«ê³  í‚¤ì›Œë“œ ì°½ì€ ìœ ì§€í•©ë‹ˆë‹¤)
          if (event.state && event.state.view === 'keyword') {
               if (alertModal) alertModal.style.display = 'none';       // ë“±ë¡ ì™„ë£Œ/ì˜¤ë¥˜ ì•Œë¦¼ ë„ê¸°
               if (keywordDeleteModal) keywordDeleteModal.style.display = 'none'; // ì‚­ì œ í™•ì¸ì°½ ë„ê¸°
               
               // ë¶€ëª¨ ì°½ì¸ í‚¤ì›Œë“œ ëª¨ë‹¬ì€ í™•ì‹¤íˆ ì¼œë‘¡ë‹ˆë‹¤.
               if (keywordModal) keywordModal.style.display = 'flex';
               return;
          }

          // 3. [ìƒì„¸ íŒì—…] ìƒíƒœ ë˜ëŠ” [ìº˜ë¦°ë” ê¸°ë³¸] ìƒíƒœë¡œ ëŒì•„ì™”ì„ ë•Œ
          // -> í™”ë©´ì— ë– ìˆëŠ” ëª¨ë“  íŒì—…ë“¤ì„ ë•ë‹ˆë‹¤.
          if ((event.state && event.state.page === 'calendar') || (event.state && event.state.view === 'modal')) {
               
               // í•˜ìœ„ íŒì—…ë“¤ ë‹«ê¸°
               if (confirmModal) confirmModal.style.display = 'none';
               if (alertModal) alertModal.style.display = 'none';
               if (noticeModal) noticeModal.style.display = 'none';
               if (keywordDeleteModal) keywordDeleteModal.style.display = 'none';

               // 1ì°¨ íŒì—…ë“¤ ë‹«ê¸° (ë‹¨, í˜„ì¬ ìƒíƒœê°€ ê·¸ íŒì—…ì¸ ê²½ìš°ëŠ” ì œì™¸)
               if (event.state.page === 'calendar') {
                    if (eventModal) eventModal.style.display = 'none';
                    if (conditionModal) conditionModal.style.display = 'none';
                    if (keywordModal) keywordModal.style.display = 'none';
               }

               // 'modal' ìƒíƒœ(ê³µì—°ìƒì„¸)ë¼ë©´ ê±”ëŠ” ì¼œë‘¬ì•¼ í•¨ (ICS íŒì—… ë‹«ê³  ëŒì•„ì˜¨ ê²½ìš°)
               if (event.state.view === 'modal') {
                    if (eventModal) eventModal.style.display = 'flex';
               }

               document.body.classList.remove('no-scroll');
               return; 
          }

          // 4. [ë§¨ ì²˜ìŒ/ì¢…ë£Œ] ìƒíƒœ (stateê°€ null)
          if (event.state === null) {
               // A. ì¢…ë£Œ íŒì—…ì´ ì´ë¯¸ ì¼œì ¸ìˆë‹¤ë©´? -> ë„ê³  ë‹¬ë ¥ìœ¼ë¡œ ë³µê·€ (ì·¨ì†Œ íš¨ê³¼)
               if (exitModal.style.display === 'flex') {
                    exitModal.style.display = 'none';
                    history.pushState({ page: 'calendar' }, '', ''); 
                    return;
               }

               // B. í˜¹ì‹œë¼ë„ ì•Œë¦¼ì°½ ê°™ì€ ê²Œ ì¼œì ¸ìˆë‹¤ë©´ -> ë„ê¸° (ì¸íŠ¸ë¡œ ë“± ì˜ˆì™¸ ìƒí™©)
               if (alertModal && alertModal.style.display === 'flex') {
                    alertModal.style.display = 'none';
                    return;
               }

               // C. ì•„ë¬´ íŒì—…ë„ ì—†ë‹¤ë©´? -> ì¢…ë£Œ íŒì—… ë„ìš°ê¸° (ì¸íŠ¸ë¡œ í™”ë©´ ì•„ë‹ ë•Œë§Œ)
               if (document.getElementById('introModal').style.display === 'none') {
                    exitModal.style.display = 'flex';
                    // ì¢…ë£Œ íŒì—… ìƒíƒœì—ì„œ ë‹¤ì‹œ ë’¤ë¡œê°€ê¸°ë¥¼ ëˆ„ë¥´ë©´ êº¼ì§€ê²Œ í•˜ê¸° ìœ„í•´ 'calendar' ìƒíƒœ ì£¼ì…
                    history.pushState({ page: 'calendar' }, '', '');
               }
          }
     };

     function closeNoticePopup() {
          history.back();
     }

     // [4] ì¢…ë£Œ íŒì—… ê¸°ëŠ¥ - ì·¨ì†Œ
     function cancelExitApp() {
          document.getElementById('exitConfirmModal').style.display = 'none';
     }

     // [5] ì¢…ë£Œ íŒì—… ê¸°ëŠ¥ - í™•ì¸(ì§„ì§œ ì¢…ë£Œ)
     function confirmExitApp() {
          // ì§„ì§œ ì¢…ë£Œ (ë‘ ì¹¸ ë’¤ë¡œ ê°€ê¸°)
          history.go(-2);
     }
     // [ì¶”ê°€] ì¸íŠ¸ë¡œ íŒì—…ìš© 'ëª¨ë‘í•´ì œ/ëª¨ë‘ì„ íƒ' ê¸°ëŠ¥
     function toggleIntroReset() {
          const btn = document.getElementById('btn-intro-reset');
          // 'ê°€ì¡±'ì²˜ëŸ¼ ë¹„í™œì„±í™”(disabled)ëœ ê±´ ì œì™¸í•˜ê³  ê°€ì ¸ì˜µë‹ˆë‹¤.
          const chks = document.querySelectorAll('.intro-genre-chk:not(:disabled)');
          
          // í˜„ì¬ í™œì„±í™”ëœ ì²´í¬ë°•ìŠ¤ë“¤ì´ ì „ë¶€ ì²´í¬ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
          const isAllChecked = Array.from(chks).every(c => c.checked);

          if (isAllChecked) {
               // ì „ë¶€ ì²´í¬ë˜ì–´ ìˆìœ¼ë©´ -> ë‹¤ ë•ë‹ˆë‹¤
               chks.forEach(c => c.checked = false);
               btn.innerText = "ëª¨ë‘ì„ íƒ";
          } else {
               // í•˜ë‚˜ë¼ë„ êº¼ì ¸ ìˆìœ¼ë©´ -> ë‹¤ ì¼­ë‹ˆë‹¤
               chks.forEach(c => c.checked = true);
               btn.innerText = "ëª¨ë‘í•´ì œ";
          }
     }   
    </script>
    <div id="keywordDeleteModal" class="modal-overlay" style="z-index: 30001; align-items: center; padding-top: 0;" onclick="closeKeywordDeleteModal()">
        <div class="confirm-content" onclick="event.stopPropagation()">
            <div class="confirm-text" style="font-size: 20px;">
                ì´ í‚¤ì›Œë“œ ì•Œë¦¼ì„<br>ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
            </div>
            <div class="confirm-btn-group">
                <button onclick="closeKeywordDeleteModal()" class="confirm-btn btn-no">ì·¨ì†Œ</button>
                <button onclick="realDeleteKeyword()" class="confirm-btn btn-yes">í™•ì¸</button>
            </div>
        </div>
    </div>
</body>
</html>